(this["webpackJsonpmusic-scholars-annotator"]=this["webpackJsonpmusic-scholars-annotator"]||[]).push([[0],{255:function(e,t){e.exports="data:image/png;base64,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"},486:function(e,t,n){e.exports=n.p+"static/media/play-solid.f79fe6ae.svg"},488:function(e,t,n){e.exports=n.p+"static/media/arrow-to-left-regular.1bf90cef.svg"},489:function(e,t,n){e.exports=n.p+"static/media/arrow-to-right-regular.f0cdfa6a.svg"},490:function(e,t,n){e.exports=n.p+"static/media/search-minus-solid.bc6bab64.svg"},491:function(e,t,n){e.exports=n.p+"static/media/search-plus-solid.5485d017.svg"},496:function(e,t,n){e.exports=n.p+"static/media/search-solid.55b2964c.svg"},501:function(e,t,n){e.exports=n(995)},518:function(e,t){},520:function(e,t){},530:function(e,t){},532:function(e,t){},558:function(e,t){},560:function(e,t){},561:function(e,t){},566:function(e,t){},568:function(e,t){},587:function(e,t){},599:function(e,t){},602:function(e,t){},629:function(e,t){},668:function(e,t){},669:function(e,t){},995:function(e,t,n){"use strict";n.r(t);var a,o=n(0),r=n.n(o),i=n(49),s=n.n(i),l=n(7),c=n(10),u=n(14),d=n(15),h=n(53),p=n(44),m=n(189),f=n(190),g=n.n(f),v=n(155),y=n(30),b=n(198),E=n(999),C=n(1003),A=n(1e3),w=n(1004),S=n(1001),k=n(1002),O=n(28),x=n(29),j=n(500),B=n(484),T=n(485),R=n(320),N=n(253),I=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).state={value:"",seconds:"",target:[],buttonStatus:"disabledSubmitButton"},e.onChange=function(t){return e.setState({value:t.target.value})},e.onTimeChange=function(t){return e.setState({seconds:t.target.value},(function(){return console.log(e.state.seconds)}))},e}return Object(c.a)(n,[{key:"wipeState",value:function(){this.setState({value:"",seconds:""})}},{key:"render",value:function(){var e={value:this.state.value,seconds:this.state.seconds};return r.a.createElement("div",null,"playlist"===this.props.annotationType&&r.a.createElement("div",null,r.a.createElement("input",{type:"text",value:this.state.value,name:"value",placeholder:"enter link here",onChange:this.onChange,className:"sizedTextBox"}),r.a.createElement("span",null," with title: "),r.a.createElement("input",{type:"text",placeholder:"title",name:"seconds",value:this.state.seconds,onChange:this.onTimeChange,className:"sizedTextBox"})),"cueMedia"!==this.props.annotationType&&r.a.createElement("textarea",{className:"textArea",id:"annotationContent",name:"value",value:this.state.value,placeholder:this.props.placeholder,onChange:this.onChange}),"cueMedia"===this.props.annotationType&&r.a.createElement("div",null,r.a.createElement("input",{type:"text",value:this.state.value,name:"value",placeholder:"enter link here",onChange:this.onChange,className:"sizedTextBox"}),r.a.createElement("span",null," jump to: "),r.a.createElement("input",{type:"text",pattern:"[0-9]",placeholder:"seconds",name:"seconds",value:this.state.seconds,onChange:this.onTimeChange,className:"sizedTextBox"})),this.state.value&&r.a.createElement("button",{className:"enabledSubmitButton",title:"click to post your annotation to your solid POD"},r.a.createElement("svg",{"aria-hidden":"true",focusable:"false","data-prefix":"far","data-icon":"arrow-alt-to-top",className:"svg-inline--fa fa-arrow-alt-to-top fa-w-12",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 384 512",width:"1em",height:"1em",display:"inline-flex"},r.a.createElement("path",{fill:"white",d:"M48 336h51.6v96c0 26.5 21.5 48 48 48h88.6c26.5 0 48-21.5 48-48v-96h51.6c42.6 0 64.2-51.7 33.9-81.9l-143.9-144c-18.7-18.7-49.1-18.7-67.9 0l-144 144C-16 284.2 5.3 336 48 336zm144-192l144 144h-99.7v144h-88.6V288H48l144-144zM0 68V44c0-6.6 5.4-12 12-12h360c6.6 0 12 5.4 12 12v24c0 6.6-5.4 12-12 12H12C5.4 80 0 74.6 0 68z"}))," ",r.a.createElement(N.a,{buttonContent:this.props.buttonContent,submitUri:this.props.submitUri,submitHandler:this.props.submitHandler,submitHandlerArgs:e,onResponse:this.props.onResponse})),!this.state.value&&r.a.createElement("button",{className:"disabledSubmitButton",title:"click to post your annotation to your solid POD"},r.a.createElement("svg",{"aria-hidden":"true",focusable:"false","data-prefix":"far","data-icon":"file-import",className:"svg-inline--fa fa-file-import fa-w-16",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",width:"1em",height:"1em",display:"inline-flex"},r.a.createElement("path",{fill:"white",d:"M497.83 97.98L413.94 14.1c-9-9-21.2-14.1-33.89-14.1H175.99C149.5.1 128 21.6 128 48.09v215.98H12c-6.63 0-12 5.37-12 12v24c0 6.63 5.37 12 12 12h276v48.88c0 10.71 12.97 16.05 20.52 8.45l71.77-72.31c4.95-4.99 4.95-13.04 0-18.03l-71.77-72.31c-7.55-7.6-20.52-2.26-20.52 8.45v48.88H175.99V48.09h159.97v103.98c0 13.3 10.7 23.99 24 23.99H464v287.95H175.99V360.07H128v103.94c0 26.49 21.5 47.99 47.99 47.99h287.94c26.5 0 48.07-21.5 48.07-47.99V131.97c0-12.69-5.17-24.99-14.17-33.99zm-113.88 30.09V51.99l76.09 76.08h-76.09z"}))," ",r.a.createElement(N.a,{buttonContent:"Write something to begin...",submitUri:this.props.submitUri,submitHandler:this.props.submitHandler,submitHandlerArgs:e,onResponse:this.props.onResponse})),r.a.createElement("button",{onClick:this.props.onRefreshClick,className:"refreshButton",title:"click to display the annotation contained in your solid POD"},r.a.createElement("svg",{"aria-hidden":"true",focusable:"false","data-prefix":"fas","data-icon":"redo-alt",className:"svg-inline--fa fa-redo-alt fa-w-16",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",width:"1em",height:"1em",display:"inline-flex"},r.a.createElement("path",{fill:"white",d:"M256.455 8c66.269.119 126.437 26.233 170.859 68.685l35.715-35.715C478.149 25.851 504 36.559 504 57.941V192c0 13.255-10.745 24-24 24H345.941c-21.382 0-32.09-25.851-16.971-40.971l41.75-41.75c-30.864-28.899-70.801-44.907-113.23-45.273-92.398-.798-170.283 73.977-169.484 169.442C88.764 348.009 162.184 424 256 424c41.127 0 79.997-14.678 110.629-41.556 4.743-4.161 11.906-3.908 16.368.553l39.662 39.662c4.872 4.872 4.631 12.815-.482 17.433C378.202 479.813 319.926 504 256 504 119.034 504 8.001 392.967 8 256.002 7.999 119.193 119.646 7.755 256.455 8z"})),r.a.createElement("span",null,""," Fetch Annotations")))}}]),n}(r.a.Component),M=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).submitHandler=function(e){a.textArea.current.wipeState();var t=e.value,n=e.seconds;switch(a.props.annotationType){case"describing":return{"@context":"http://www.w3.org/ns/anno.jsonld",target:a.props.selection.map((function(e){return{id:a.props.uri+"#"+e.getAttribute("id")}})),type:"Annotation",body:[{id:Object(R.a)(),type:"TextualBody",value:t}],motivation:"describing",created:(new Date).toISOString(),creator:a.props.creator};case"linking":return{"@context":"http://www.w3.org/ns/anno.jsonld",target:a.props.selection.map((function(e){return{id:a.props.uri+"#"+e.getAttribute("id")}})),type:"Annotation",body:[{id:t}],motivation:"linking",created:(new Date).toISOString(),creator:a.props.creator};case"cueMedia":return{"@context":"http://www.w3.org/ns/anno.jsonld",target:a.props.selection.map((function(e){return{id:a.props.uri+"#"+e.getAttribute("id")}})),type:"Annotation",body:[{id:t+"#t="+n}],motivation:"trompa:cueMedia",created:(new Date).toISOString(),creator:a.props.creator};case"image":return{"@context":"http://www.w3.org/ns/anno.jsonld",target:a.props.selection.map((function(e){return{id:a.props.uri+"#"+e.getAttribute("id")}})),type:"Annotation",body:[{id:t}],motivation:"trompa:cueImage",created:(new Date).toISOString(),creator:a.props.creator};case"playlist":return{"@context":"http://www.w3.org/ns/anno.jsonld",target:a.props.selection.map((function(e){return{id:a.props.uri+"#"+e.getAttribute("id")}})),type:"Annotation",body:[{id:Object(R.a)(),type:"TextualBody",seconds:n,value:t}],motivation:"trompa:playlist",created:(new Date).toISOString(),creator:a.props.creator};case"replying":return{"@context":"http://www.w3.org/ns/anno.jsonld",target:a.props.replyAnnotationTargetId,type:"Annotation",body:[{id:Object(R.a)(),type:"TextualBody",value:t}],motivation:"replying",created:(new Date).toISOString(),creator:a.props.creator};default:console.log("no annotation found, have you selected the annotation type?")}},a.textArea=r.a.createRef(),a}return Object(c.a)(n,[{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement("div",{className:"container"},r.a.createElement("h3",null,"Annotation type"),r.a.createElement("label",null,r.a.createElement("input",{title:"adds a textual content to the annotation",type:"radio",name:"annotationType",value:"describing",placeholder:"Add your annotation...",onChange:this.props.onAnnoTypeChange,checked:"describing"===this.props.annotationType}),"Describing"),r.a.createElement("label",null,r.a.createElement("input",{title:"links external resources to the annotation",type:"radio",value:"linking",name:"annotationType",placeholder:"Insert your URI link...",onChange:this.props.onAnnoTypeChange,checked:"linking"===this.props.annotationType}),"Linking"),r.a.createElement("label",null,r.a.createElement("input",{title:"links a media content to the annotation",type:"radio",value:"cueMedia",name:"annotationType",onChange:this.props.onAnnoTypeChange,checked:"cueMedia"===this.props.annotationType}),"Cue Media"),r.a.createElement("label",null,r.a.createElement("input",{title:"links an image content to the annotation",type:"radio",value:"image",name:"annotationType",placeholder:"Insert your image link...",onChange:this.props.onAnnoTypeChange,checked:"image"===this.props.annotationType}),"Image"),r.a.createElement("label",null,r.a.createElement("input",{title:"playlist",type:"radio",value:"playlist",name:"annotationType",onChange:this.props.onAnnoTypeChange,checked:"playlist"===this.props.annotationType}),"Playlist"),r.a.createElement("label",null,r.a.createElement("input",{title:"will be used when the reply button is clicked",type:"radio",value:"reply",name:"annotationType",disabled:!0,checked:"replying"===this.props.annotationType}),"Reply"),r.a.createElement("div",{className:"addAnnotations"},r.a.createElement(I,{ref:this.textArea,annotationType:this.props.annotationType,submitUri:this.props.submitUri,placeholder:this.props.placeholder,submitHandler:this.submitHandler,onResponse:this.props.onResponse,onRefreshClick:this.props.onRefreshClick,buttonContent:this.props.buttonContent,selectorString:this.props.selectorString}))))}}]),n}(r.a.Component),D=function(e){var t=e.label,n=e.onClick;return r.a.createElement("span",null,r.a.createElement("label",null,r.a.createElement("input",{type:"checkbox",name:t.name,onClick:n,value:t.value,key:t.value}),t.name))},P=[{name:"Note",value:".note"},{name:"Measure",value:".measure"},{name:"Dynamics",value:".dynam"},{name:"Directives",value:".dir"}],H=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={selectorString:[]},e.createCheckbox=function(t){return r.a.createElement(D,{label:t,onClick:function(n){return e.updateSelectorList(n,t.value)},key:t.value})},e.buildCheckboxes=function(){return P.map(e.createCheckbox)},e}return Object(c.a)(n,[{key:"updateSelectorList",value:function(e,t){var n=this;e.target.checked?this.setState({selectorString:this.state.selectorString.concat([t])},(function(){n.props.handleStringChange(n.state.selectorString)})):this.setState({selectorString:this.state.selectorString.filter((function(e){return e!==t}))},(function(){n.props.handleStringChange(n.state.selectorString)}))}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("h3",null,"Selection type"),r.a.createElement("form",null,this.buildCheckboxes()))}}]),n}(o.Component),L=n(1),V=n.n(L),q=n(12),Q=n(24),W=n.n(Q),U=n(254),F=n.n(U),z=n(56),Z=n(486),Y=n.n(Z),J=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).showDetails=function(e){e.preventDefault(),e.stopPropagation();var t=e.target.closest(".rootAnno"),n=t.querySelector(".hiddenDetails");if(n&&!1===a.state.isVisible)a.setState({isVisible:!0}),n.classList.remove("hiddenDetails"),n.classList.add("showDetails");else if(!0===a.state.isVisible){a.setState({isVisible:!1});var o=t.querySelector(".showDetails");o.classList.remove("showDetails"),o.classList.add("hiddenDetails")}},a.showReplyDetails=function(e){e.preventDefault(),e.stopPropagation();var t=e.target.closest(".quoteContent"),n=t.querySelector(".hiddenDetails");if(n&&!1===a.state.isVisible)a.setState({isVisible:!0}),n.classList.remove("hiddenDetails"),n.classList.add("showDetails");else if(!0===a.state.isVisible){a.setState({isVisible:!1});var o=t.querySelector(".showDetails");o.classList.remove("showDetails"),o.classList.add("hiddenDetails")}},a.onClick=function(e){e.preventDefault(),e.stopPropagation();var t=a.props.annotation.target,n=a.props.annotation["@id"];a.props.onAnnoReplyHandler(t,n),console.log("reply target id",n)},a.showConfirm=function(e){e.preventDefault(),e.stopPropagation();var t=e.target.closest(".rootAnno"),n=t.querySelector(".hiddenConfirm");if(n&&!1===a.state.isConfirmVisible)a.setState({isConfirmVisible:!a.state.isConfirmVisible}),n.classList.remove("hiddenConfirm"),n.classList.add("showConfirm");else if(!0===a.state.isConfirmVisible){a.setState({isConfirmVisible:!a.state.isConfirmVisible});var o=t.querySelector(".showConfirm");o.classList.remove("showConfirm"),o.classList.add("hiddenConfirm")}},a.onPlayClick=function(e){e.preventDefault(),e.stopPropagation();var t=a.props.annotation.body[0].id;a.props.onMediaClick(t)},a.onPreviewclick=function(e){e.preventDefault(),e.stopPropagation();var t=e.target.closest(".rootAnno").children[0];!1===a.state.isPictureShowing?(a.setState({isPictureShowing:!0,previewButtonContent:"Hide preview"}),console.log(t),document.querySelector(".hiddenContainer").addEventListener("click",(function(e){e.stopPropagation()})),t.classList.remove("hiddenContainer"),t.classList.add("showContainer")):(document.querySelector(".showContainer").addEventListener("click",(function(e){e.stopPropagation()})),a.setState({isPictureShowing:!1,previewButtonContent:"show preview"}),t.classList.add("hiddenContainer"),t.classList.remove("showContainer"))},a.onShowReplyClick=function(e){e.preventDefault(),e.stopPropagation();var t=e.target.closest(".rootAnno");console.log("root anno",t);var n=document.querySelectorAll(".replyAnno");n.length?n.forEach((function(e){var n=e.dataset.replyAnnotationTarget,o=t.dataset.selfId;if(console.log("Reply target anno id: ",n),n===o)if(!1===a.props.areRepliesVisible||!1===a.state.isClicked){a.setState({isClicked:!0}),t.appendChild(e),a.props.showReplyHandler();var r=Array.from(t.getElementsByClassName("showReply"));r.forEach((function(e){return e.classList.add("hiddenReply")})),r.forEach((function(e){return e.classList.remove("showReply")}));var i=Array.from(t.getElementsByClassName("hiddenReply"));i.forEach((function(e){return e.classList.add("showReply")})),i.forEach((function(e){return e.classList.remove("hiddenReply")}))}else{a.setState({isClicked:!1}),a.props.showReplyHandler();var s=document.querySelector(".listContainer"),l=Array.from(t.getElementsByClassName("showReply"));l.forEach((function(e){e.classList.add("hiddenReply"),s.appendChild(e)})),l.forEach((function(e){return e.classList.remove("showReply")}))}})):console.warn("no replies to show for this annotation")},a.renderSwitch=function(){var e,t,n=a.props.annotation.created,o=(new Date).toISOString(),i=n.split("T")[0],s=String(o.split("T")[0]),l=document.querySelectorAll(".replyAnno"),c=a.props.annotation["@id"],u=!1;l.length&&l.forEach((function(e){e.dataset.replyAnnotationTarget===c&&(u=!0)})),e=a.state.datasetWithAcl?Object(z.c)(a.state.datasetWithAcl).read?"public":Object.keys(Object(z.b)(a.state.datasetWithAcl))>1?"shared":"private":"unknown",a.state.userMayModifyAccess?"public"!==e?t=r.a.createElement(F.a,{checked:!1,onChange:a.grantPublic,icons:{unchecked:r.a.createElement("svg",{"aria-hidden":"true",focusable:"false","data-prefix":"fas","data-icon":"lock",className:"svg-inline--fa fa-lock fa-w-14",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 576 512","vertical-align":"middle"},r.a.createElement("path",{fill:"white",d:"M400 224h-24v-72C376 68.2 307.8 0 224 0S72 68.2 72 152v72H48c-26.5 0-48 21.5-48 48v192c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V272c0-26.5-21.5-48-48-48zm-104 0H152v-72c0-39.7 32.3-72 72-72s72 32.3 72 72v72z"}))}}):"public"===e&&(t=r.a.createElement(F.a,{checked:!0,onChange:a.revokePublic,icons:{checked:r.a.createElement("svg",{"aria-hidden":"true",focusable:"false","data-prefix":"fas","data-icon":"lock-open",className:"svg-inline--fa fa-lock-open fa-w-18",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 576 512"},r.a.createElement("path",{fill:"white",d:"M423.5 0C339.5.3 272 69.5 272 153.5V224H48c-26.5 0-48 21.5-48 48v192c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V272c0-26.5-21.5-48-48-48h-48v-71.1c0-39.6 31.7-72.5 71.3-72.9 40-.4 72.7 32.1 72.7 72v80c0 13.3 10.7 24 24 24h32c13.3 0 24-10.7 24-24v-80C576 68 507.5-.3 423.5 0z"}))}})):t=r.a.createElement("span",{className:"accessPermissions"},"No access");var d=r.a.createElement("div",null,r.a.createElement("div",{className:"hiddenConfirm"},r.a.createElement("div",null,"Delete this annotation and its replies?",r.a.createElement("p",null,r.a.createElement("button",{className:"deleteYes",onClick:a.deleteAnno},"yes"),r.a.createElement("button",{className:"deleteNo",onClick:a.showConfirm},"no")))),r.a.createElement("div",{style:{paddingTop:"1.5%"}},s===i&&r.a.createElement("button",{className:"deleteButton",onClick:a.showConfirm},r.a.createElement("svg",{"aria-hidden":"true",focusable:"false","data-prefix":"fas","data-icon":"trash",className:"svg-inline--fa fa-trash fa-w-14",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512",width:"100%",height:"100%"},r.a.createElement("path",{fill:"grey",d:"M432 32H312l-9.4-18.7A24 24 0 0 0 281.1 0H166.8a23.72 23.72 0 0 0-21.4 13.3L136 32H16A16 16 0 0 0 0 48v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16V48a16 16 0 0 0-16-16zM53.2 467a48 48 0 0 0 47.9 45h245.8a48 48 0 0 0 47.9-45L416 128H32z"}))),r.a.createElement("button",{className:"infoButton",onMouseEnter:a.showDetails,onMouseLeave:a.showDetails},r.a.createElement("svg",{"aria-hidden":"true",focusable:"false","data-prefix":"far","data-icon":"info-circle",className:"svg-inline--fa fa-info-circle fa-w-16",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",width:"100%",height:"100%"},r.a.createElement("path",{fill:"grey",d:"M256 8C119.043 8 8 119.083 8 256c0 136.997 111.043 248 248 248s248-111.003 248-248C504 119.083 392.957 8 256 8zm0 448c-110.532 0-200-89.431-200-200 0-110.495 89.472-200 200-200 110.491 0 200 89.471 200 200 0 110.53-89.431 200-200 200zm0-338c23.196 0 42 18.804 42 42s-18.804 42-42 42-42-18.804-42-42 18.804-42 42-42zm56 254c0 6.627-5.373 12-12 12h-88c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h12v-64h-12c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h64c6.627 0 12 5.373 12 12v100h12c6.627 0 12 5.373 12 12v24z"}))),"permissions: ",t)),h=r.a.createElement("div",null,r.a.createElement("div",{className:"hiddenDetails"}," ",r.a.createElement("p",{className:"date"},"Created on: ",n,", access permissions: ",e,".")),r.a.createElement("div",null,!0===u&&r.a.createElement("button",{className:"showRepliesButton",name:"showRepliesButton",onClick:a.onShowReplyClick},a.state.showRepliesButtonContent),r.a.createElement("button",{className:"replyButton",name:"replyButton",onClick:a.onClick},"Reply"))),p=a.props.annotation.motivation,m=a.props.annotation.body[0].value,f=a.props.annotation.body[0].id,g=a.props.annotation.body[0].id,v=a.props.annotation.target[0].id,y=a.props.annotation.target,b=a.props.annotation.creator||"unknown";switch(p){case"describing":return r.a.createElement("div",{className:"rootAnno annoItem","data-target":v,"data-self-id":c}," ",d,r.a.createElement("p",null,m),h);case"linking":if(f.startsWith("http"))return r.a.createElement("div",{className:"rootAnno annoItem","data-target":v,"data-self-id":c},r.a.createElement("p",null,"",d,r.a.createElement("a",{href:f,onClick:"return false;",target:"_blank",rel:"noopener noreferrer"},f)),h);var E="https://"+f;return r.a.createElement("div",{className:"rootAnno annoItem","data-target":v,"data-self-id":c},d,r.a.createElement("p",null,"",r.a.createElement("a",{href:E,onClick:"return false;",target:"_blank",rel:"noopener noreferrer"},f)),h);case"trompa:cueMedia":var C=g.split("#")[0];return r.a.createElement("div",{className:"rootAnno annoItem","data-target":v,"data-self-id":c}," ",d,r.a.createElement("p",null,C," ",r.a.createElement("button",{className:"playButton",onClick:a.onPlayClick}," ",r.a.createElement("img",{src:Y.a,alt:"",style:{width:"5px",alignContent:"center",textAlign:"center"}})," ","play"," ")),h);case"trompa:cueImage":return r.a.createElement("div",{className:"rootAnno annoItem","data-target":v,"data-self-id":c}," ",r.a.createElement("div",{className:"hiddenContainer"},r.a.createElement("a",{href:g,target:"_blank",rel:"noopener noreferrer"},r.a.createElement("img",{title:"click for full res",src:g,alt:"annotation",style:{maxWidth:"240px",maxHeight:"135px",marginTop:"5px"}}))),d,r.a.createElement("p",null,"The content of this annotation is a picture, click the button to see a preview"," ",r.a.createElement("button",{onClick:a.onPreviewclick},a.state.previewButtonContent," ")),h);case"trompa:playlist":return;case"replying":return r.a.createElement("div",{"data-reply-annotation-target":y,"data-self-id":c,className:"replyAnno hiddenReply"},r.a.createElement("div",{className:"quoteContent"},r.a.createElement("button",{className:"deleteButton",onClick:a.deleteAnno},r.a.createElement("svg",{"aria-hidden":"true",focusable:"false","data-prefix":"fas","data-icon":"trash",className:"svg-inline--fa fa-trash fa-w-14",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512",width:"100%",height:"100%"},r.a.createElement("path",{fill:"grey",d:"M432 32H312l-9.4-18.7A24 24 0 0 0 281.1 0H166.8a23.72 23.72 0 0 0-21.4 13.3L136 32H16A16 16 0 0 0 0 48v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16V48a16 16 0 0 0-16-16zM53.2 467a48 48 0 0 0 47.9 45h245.8a48 48 0 0 0 47.9-45L416 128H32z"}))),r.a.createElement("button",{className:"infoButton",onMouseEnter:a.showReplyDetails,onMouseLeave:a.showReplyDetails},r.a.createElement("svg",{"aria-hidden":"true",focusable:"false","data-prefix":"far","data-icon":"info-circle",className:"svg-inline--fa fa-info-circle fa-w-16",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",width:"100%",height:"100%"},r.a.createElement("path",{fill:"grey",d:"M256 8C119.043 8 8 119.083 8 256c0 136.997 111.043 248 248 248s248-111.003 248-248C504 119.083 392.957 8 256 8zm0 448c-110.532 0-200-89.431-200-200 0-110.495 89.472-200 200-200 110.491 0 200 89.471 200 200 0 110.53-89.431 200-200 200zm0-338c23.196 0 42 18.804 42 42s-18.804 42-42 42-42-18.804-42-42 18.804-42 42-42zm56 254c0 6.627-5.373 12-12 12h-88c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h12v-64h-12c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h64c6.627 0 12 5.373 12 12v100h12c6.627 0 12 5.373 12 12v24z"}))),r.a.createElement("p",null,"Reply: ",m),r.a.createElement("span",{className:"hiddenDetails"}," ",r.a.createElement("span",{className:"date"},"Created on: ",n,", access permissions: ",e,"."))));default:return console.log("no motivation provided defaulting to plain text annotation",p),r.a.createElement("div",{className:"annoItem","data-target":v}," ",r.a.createElement("p",null,"The plain text content of this annotation is ",m),r.a.createElement("div",{className:"date"},"Created on: ",n," by ",b," with ",p," motivation"))}},a.state={isClicked:!1,userMayModifyAccess:!1,resourceAcl:null,aclModified:!1,datasetWithAcl:null,userId:null,isPictureShowing:!1,previewButtonContent:"Show preview",showRepliesButtonContent:"Toggle replies",isConfirmVisible:!1,isVisible:!1,resp:""},a.grantPublic=a.grantPublic.bind(Object(x.a)(a)),a.revokePublic=a.revokePublic.bind(Object(x.a)(a)),a.updateDatasetAcl=a.updateDatasetAcl.bind(Object(x.a)(a)),a.deleteAnno=a.deleteAnno.bind(Object(x.a)(a)),a}return Object(c.a)(n,[{key:"deleteAnno",value:function(e){var t=this,n=e.target.closest(".rootAnno"),a=document.querySelectorAll(".replyAnno");a&&a.forEach((function(e){e.dataset.replyAnnotationTarget===n.dataset.selfId&&(console.log("replies found: ",e.dataset.selfId),W.a.fetch(e.dataset.selfId,{method:"DELETE"}).then(console.log("replies deleted")))})),W.a.fetch(this.props.annotation["@id"],{method:"DELETE"}).then(function(){var e=Object(q.a)(V.a.mark((function e(n){var a,o;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.json();case 2:if(a=e.sent,n.ok){e.next=6;break}return o=a&&a.message||n.status,e.abrupt("return",Promise.reject(o));case 6:t.setState({resp:"success"});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).then(this.props.onRefreshClick()).catch((function(){console.warn("Your annotation has been deleted, refreshing...")}))}},{key:"componentDidMount",value:function(){this.updateDatasetAcl()}},{key:"updateDatasetAcl",value:function(){var e=this;W.a.currentSession().then((function(t){Object(z.e)(e.props.annotation["@id"],{fetch:W.a.fetch}).then((function(n){var a;if(console.log("Got dataset: ",n),Object(z.h)(n))a=Object(z.d)(n),e.setState({userMayModifyAccess:!0,datasetWithAcl:n,resourceAcl:a,aclModified:Date.now()}),console.log("Got resource ACL");else if(Object(z.f)(n)||console.warn("You do not have permission to modify access on ",e.props.annotation["@id"]),Object(z.g)(n)){a=Object(z.a)(n);var o=Object(z.j)(a,t.webId,{read:!0,append:!0,write:!0,control:!0});e.setState({userMayModifyAccess:!0,datasetWithAcl:n,resourceAcl:o,aclModified:Date.now()}),console.log("Creating ACL from fallback ACL")}else console.warn("You do not have permission to view access rights list on ",e.props.annotation["@id"])})).catch((function(t){return console.error("Couldn't get Solid dataset with ACL: ",e.props.annotation["@id"],t)}))})).catch((function(e){return console.error("Couldn't access the current Solid session: ",e)}))}},{key:"shouldComponentUpdate",value:function(e,t){return this.state.aclModified!==t.aclModified}},{key:"grantPublic",value:function(e){var t=this;e.preventDefault(),e.stopPropagation(),W.a.currentSession().then((function(e){var n=Object(z.k)(t.state.resourceAcl,{read:!0,append:!1,write:!1,control:!1});n=Object(z.j)(n,e.webId,{read:!0,append:!0,write:!0,control:!0}),Object(z.i)(t.state.datasetWithAcl,n,{fetch:W.a.fetch}).then((function(){return t.updateDatasetAcl()})).catch((function(e){return console.error("Could not grant public access: ",e)}))}))}},{key:"revokePublic",value:function(e){var t=this;console.log("Revoking. Old acl: ",this.state.resourceAcl),e.stopPropagation(),e.preventDefault(),W.a.currentSession().then((function(e){var n=Object(z.k)(t.state.resourceAcl,{read:!1,append:!1,write:!1,control:!1});n=Object(z.j)(n,e.webId,{read:!0,append:!0,write:!0,control:!0}),Object(z.i)(t.state.datasetWithAcl,n,{fetch:W.a.fetch}).then((function(){return t.updateDatasetAcl()})).catch((function(e){return console.error("Could not revoke public access: ",e)}))}))}},{key:"render",value:function(){return r.a.createElement("div",{className:"annoItemContainer"},this.renderSwitch())}}]),n}(r.a.Component),G=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).state={order:"desc"},e}return Object(c.a)(n,[{key:"render",value:function(){var e=this,t=this.state.order,n=this.props.allEntries.filter((function(t){return e.props.filteringEntries.includes(t["@id"])})).sort((function(e,n){return("asc"===t?1:-1)*e.created.localeCompare(n.created)}));function a(e){console.log("i am being clicked");var t=Array.from(e.currentTarget.classList).filter((function(e){return e.startsWith("focus-")}));t.length>1&&console.warn("Element with multiple focus Ids!",e.target),Array.from(document.getElementsByClassName("inFocus")).forEach((function(e){return e.classList.remove("inFocus")})),Array.from(document.getElementsByClassName(t[0])).forEach((function(e){return e.classList.add("inFocus")}))}return r.a.createElement("div",{className:"listContainer",id:"listContainer"},n.map((function(t){var n=t["@id"].substr(t["@id"].lastIndexOf("/")+1);return r.a.createElement("div",{className:"focus-"+n,onClick:a,key:t["@id"],id:n},r.a.createElement(J,{annotation:t,onAnnoReplyHandler:e.props.onAnnoReplyHandler,onMediaClick:e.props.onMediaClick,replyAnnotationTarget:e.props.replyAnnotationTarget,showReplyHandler:e.props.showReplyHandler,areRepliesVisible:e.props.areRepliesVisible,onRefreshClick:e.props.onRefreshClick}))})))}}]),n}(r.a.Component),K=n(487),X=n.n(K),_=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).state={resp:""},a.delete=a.delete.bind(Object(x.a)(a)),a}return Object(c.a)(n,[{key:"delete",value:function(){var e=this;W.a.fetch(this.props.annotation["@id"],{method:"DELETE"}).then(function(){var t=Object(q.a)(V.a.mark((function t(n){var a,o;return V.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.json();case 2:if(a=t.sent,n.ok){t.next=6;break}return o=a&&a.message||n.status,t.abrupt("return",Promise.reject(o));case 6:e.setState({resp:"success"});case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).then(this.props.onRefreshClick()).catch((function(){console.warn("Your annotation has been deleted, refreshing...")}))}},{key:"render",value:function(){var e=this.props.annotation["@id"],t=this.props.annotation.body[0].seconds,n=this.props.annotation.body[0].value;return r.a.createElement("div",{className:"rootAnno playlistItem"},r.a.createElement("p",null,t),r.a.createElement("iframe",{src:n,title:e,frameBorder:"0",width:"400",height:"60"}),r.a.createElement("button",{onClick:this.delete},"del"))}}]),n}(r.a.Component),$=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).state={visible:!1},a.onClick=a.onClick.bind(Object(x.a)(a)),a}return Object(c.a)(n,[{key:"onClick",value:function(){var e=document.querySelector(".playlist");!1===this.state.visible?(this.setState({visible:!this.state.visible}),e.classList.remove("hidden")):!0===this.state.visible&&(e.classList.add("hidden"),this.setState({visible:!this.state.visible}))}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("button",{className:"renditionButton",onClick:this.onClick},"Show recordings playlist"),r.a.createElement("div",{className:"playlist hidden"},this.props.allEntries.map((function(t){return"trompa:playlist"===t.motivation&&r.a.createElement("div",{key:t["@id"]},r.a.createElement(_,{annotation:t,onRefreshClick:e.props.onRefreshClick}))}))))}}]),n}(r.a.Component),ee=n(488),te=n.n(ee),ne=n(489),ae=n.n(ne),oe=n(490),re=n.n(oe),ie=n(491),se=n.n(ie),le=n(492),ce=n.n(le),ue=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).render=function(){return r.a.createElement(ce.a,{isOpen:e.props.isOpen,onRequestClose:e.props.onRequestClose,contentLabel:"my modal",className:"mymodal",overlayClassName:"myoverlay",ariaHideApp:!1},r.a.createElement("div",null,r.a.createElement("header",{className:"modal-header"},r.a.createElement("h1",{className:"modal-title"},"Help section")),r.a.createElement("div",{className:"modal-body"},r.a.createElement("h3",null,"Below you can find some tips on how to use the annotation tool:"),r.a.createElement("br",null),r.a.createElement("div",{style:{height:500,overflow:"auto"}},r.a.createElement("h4",null,"How do I create an annotation?"),r.a.createElement("ol",null,r.a.createElement("li",null,"Select the type of selection you want to use (note, measure, directives etc)"),r.a.createElement("li",null,"Drag across the score in order to select the elements you want to annotate"),r.a.createElement("li",null,"You can select discontinuous measures by holding the shift key"),r.a.createElement("li",null,"Sometimes slurs can get in the way of your selection, you can deselect unwanted measures by holding the shift key and clicking on the measure you wish to deselect"),r.a.createElement("li",null,"Select the type of annotation you wish to submit (description, link etc)"),r.a.createElement("li",null,"Type the text or paste the URL you wish to attach to the annotation"),r.a.createElement("li",null,"Click the green submit button")),r.a.createElement("h4",null,"I made a mistake in my annotation, how can I delete it?"),r.a.createElement("ul",null,r.a.createElement("li",null,"You can delete you annotation by clicking the rubbish bin icon in the annotation item and click yes to delete it")),r.a.createElement("h4",null,"I have replied to an annotation but I can\u2019t see my reply, where is it?"),r.a.createElement("ul",null,r.a.createElement("li",null,"You can see all the replies to the specific annotation by clicking the \u201cshow replies button\u201d in the annotation you are replying to")),r.a.createElement("h4",null,"Can I create a different type of reply (media or image content)?"),r.a.createElement("ul",null,r.a.createElement("li",null,"Not right now, this feature will be released in a future version of the software")),r.a.createElement("h4",null,"How does the solid pod system work, is my data really safe?"),r.a.createElement("ul",null,r.a.createElement("li",null,"Solid was purposely built for data safety and protection, and by design everything contained in the pod is private unless specified. For more information visit the"," ",r.a.createElement("a",{href:"https://solidproject.org/",target:"_blank",rel:"noopener noreferrer"},"solid project")," ","page for more info")),r.a.createElement("h4",null,"I have found a bug, what can i do?"),r.a.createElement("ul",null,r.a.createElement("li",null,"Please submit a bug report to"," ",r.a.createElement("a",{href:"mailto:fzuba002@gold.ac.uk?subject=Bug report"},"fzuba002@gold.ac.uk")," ","describing the nature of the bug and how to reproduce it, make sure to include browser model and operating system used. Thanks! :)")))),r.a.createElement("footer",{className:"modal-footer"},r.a.createElement("button",{onClick:e.props.onRequestClose},"close"))))},e}return n}(o.Component),de=n(493),he=n(93),pe=n.n(he),me=n(131),fe=n(75),ge=n(496),ve=n.n(ge),ye=Object(fe.gql)(a||(a=Object(de.a)(['\n  query earlyMusicWorks($query: String!) {\n    ItemList(identifier: "e91489d7-a776-40dd-8abf-0c934922bd99") {\n      identifier\n      name\n      itemListElement(filter: { name_regexp: $query }) {\n        __typename\n        ... on MusicComposition {\n          identifier\n          contributor\n          name\n          source\n          composer {\n            name\n          }\n          workExample(filter: { encodingFormat: "application/mei+xml" }) {\n            ... on MediaObject {\n              identifier\n              source\n              contentUrl\n              encodingFormat\n            }\n          }\n        }\n      }\n    }\n  }\n'])));function be(e){var t="(?i).*".concat(e.query,".*"),n=Object(me.useQuery)(ye,{variables:{query:t}}),a=n.loading,o=n.error,i=n.data;if(a)return r.a.createElement("p",null,"Loading...");if(o)return r.a.createElement("p",null,"Error :(");console.debug(i);var s=i.ItemList;if(!s||!s.length)return r.a.createElement("div",null);console.debug(s);var l=s[0].itemListElement;return l&&l.length?(console.debug(l),r.a.createElement("div",null,r.a.createElement("p",null,"Results:"),r.a.createElement("ul",null,l.map((function(t){var n=t.identifier,a=t.name,o=t.contributor,i=t.composer[0].name,s=t.workExample;return s&&s.length?r.a.createElement("li",{key:n},r.a.createElement("a",{href:s[0].source,onClick:e.onSelect},i," - ",a," (from ",o,")")):""}))))):r.a.createElement("div",null)}be.props={query:pe.a.string,onSelect:pe.a.func};var Ee=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).handleChange=function(e){a.setState({fieldValue:e.target.value})},a.handleSearchChange=function(e){a.setState({searchValue:e.target.value})},a.handleSubmit=function(e){e.preventDefault(),a.props.onSelect(a.state.fieldValue||a.state.defaultValue)},a.handleSearch=function(e){e.preventDefault(),a.setState({showResults:!0})},a.handleSearchResultSelection=function(e){e.preventDefault(),a.props.onSelect(e.target.attributes.href.value)},a.state={defaultValue:a.props.defaultUrl,fieldValue:"",searchValue:"",showResults:!1,searchResults:{}},a}return Object(c.a)(n,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("p",null,"Select your MEI file:"),r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("input",{type:"text",onChange:this.handleChange,value:this.state.fieldValue,placeholder:"https://...",className:"sizedTextBox"}),r.a.createElement("input",{title:"click to render the linked MEI file",className:"MEIButton",type:"submit",value:"render"})),r.a.createElement("p",null,"Or search for an item from the TROMPA database"),r.a.createElement("form",{onSubmit:this.handleSearch,className:"hide-submit"},r.a.createElement("input",{type:"text",onChange:this.handleSearchChange,value:this.state.searchValue,placeholder:"search for a work name",className:"sizedTextBox"}),r.a.createElement("label",null,r.a.createElement("input",{title:"search for a work name",className:"MEIButton",type:"submit"}),r.a.createElement("img",{src:ve.a,alt:"zoom in",className:"searchIcon"}))),this.state.showResults&&r.a.createElement(be,{query:this.state.searchValue,onSelect:this.handleSearchResultSelection}))}}]),n}(o.Component);function Ce(e){var t=e.getElementsByTagName("staffDef"),n={};Array.from(t).forEach((function(e){var t,a=e.attributes,o=e.getElementsByTagName("label");o.length&&(t=o[0].innerHTML),a.n&&(n[a.n.value]={label:t,notes:[]})}));var a=e.getElementsByTagName("measure");return Array.from(a).forEach((function(e){var t=e.getElementsByTagName("staff");Array.from(t).forEach((function(e){var t=e.attributes.n.value,a=e.getElementsByTagName("note");Array.from(a).forEach((function(e){var a=e.attributes;n[t].notes.push({pitch:a.pname.value,oct:parseInt(a.oct.value)})}))}))})),Object.keys(n).forEach((function(e){n[e].notes=Ae(n[e].notes)})),n}function Ae(e){for(var t="-abcdefghijklmnopqrstuvwxyz".split(""),n=["A","B","C","D","E","F","G"],a=e.map((function(e){return(n.indexOf(e.pitch.toUpperCase())+1)%7+7*e.oct%7})),o=[],r=0;r<a.length-1;r++)o.push(a[r+1]-a[r]);return o.map((function(e){e<-26&&(e=-26),e>26&&(e=26);var n=t[Math.abs(e)];return e>0&&(n=n.toUpperCase()),n})).join("")}var we=n(133),Se=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).buttonPressed=function(e){e.preventDefault(),a.setState({searchReady:!0}),a.props.onButtonPress(e)},a.onValueChange=function(e){a.setState({selectedOption:e.target.value})},a.doSearch=function(){var e=a.state.meiVoiceQueryStrings[a.state.selectedOption];if(e&&e.notes){var t={codestring:e.notes};fetch("https://uk-dev-ftempo.rism.digital/api/query",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(e){return e.json()})).then((function(e){a.setState({searchResults:e})}))}},a.state={searchReady:!1,selectedOption:null,meiVoiceQueryStrings:{}},a}return Object(c.a)(n,[{key:"componentDidUpdate",value:function(e,t,n){if(this.props.counter!==e.counter){var a=this.props.vrvToolkit.getMEI(),o=(new DOMParser).parseFromString(a,"text/xml");if(console.debug(o),"parsererror"===o.documentElement.nodeName)return"";this.setState({meiVoiceQueryStrings:Ce(o)})}}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("h3",null,"Search using F-TEMPO (experimental)"),!this.state.searchReady&&r.a.createElement("button",{onClick:this.buttonPressed},"Show search options"),this.state.searchReady&&this.state.meiVoiceQueryStrings&&r.a.createElement(r.a.Fragment,null,r.a.createElement("p",null,"Search this score on F-TEMPO: select a single voice from this list as query"),r.a.createElement("ul",null,Object.keys(this.state.meiVoiceQueryStrings).map((function(t){return r.a.createElement("li",{key:t},r.a.createElement("label",null,r.a.createElement("input",{type:"radio",name:"voice",value:t,id:"voice-"+t,checked:e.state.selectedOption===t,onChange:e.onValueChange}),e.state.meiVoiceQueryStrings[t].label))}))),r.a.createElement("button",{onClick:this.doSearch,disabled:!this.state.selectedOption},"Search")),this.state.searchResults&&r.a.createElement(we.a,{allowZeroExpanded:!0},this.state.searchResults.map((function(e){return r.a.createElement(we.b,{key:e.id},r.a.createElement(we.d,null,r.a.createElement(we.c,null,e.id)),r.a.createElement(we.e,null,r.a.createElement("img",{src:"https://uk-dev-ftempo.rism.digital/img/jpg/"+e.id+".jpg",alt:""})))}))))}}]),n}(o.Component),ke=window.outerHeight,Oe=window.outerWidth,xe=ke<1439?2e3:2500,je=Oe>1925?2800:2e3,Be=Object.freeze({Annotate:"Annotate",Search:"Search"}),Te=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).zoomIn=function(){var e=a.state.vrvOptions.scale,t=a.state.vrvOptions.pageHeight,n=a.state.vrvOptions.pageWidth,o=Object.assign({},a.state.vrvOptions);o.scale=e+5,o.pageHeight=t-5*o.scale,o.pageWidth=n-2*o.scale,o.scale<50&&(o.pageWidth=n-5*o.scale),o.scale<40&&(o.pageHeight=t-8*o.scale,o.pageWidth=n-5*o.scale),Oe>=1925&&o.pageWidth>3500&&(o.pageWidth=3500),o.scale>=80?console.log("max zoom reached"):(console.log("ZOOM INCREASE",o.scale,"page w",o.pageWidth,"page h",o.pageHeight),a.setState({vrvOptions:o}))},a.zoomOut=function(){var e=a.state.vrvOptions.scale,t=a.state.vrvOptions.pageHeight,n=a.state.vrvOptions.pageWidth,o=Object.assign({},a.state.vrvOptions);o.scale=e-5,o.pageHeight=t+5*o.scale,o.pageWidth=n+2*o.scale,o.scale<50&&(o.pageWidth=n+5*o.scale),o.scale<40&&(o.pageHeight=t+8*o.scale,o.pageWidth=n+5*o.scale),o.scale<=25?console.log("minimum zoom reached"):(console.log("ZOOM DECREASE",o.scale,"page w",o.pageWidth,"page h",o.pageHeight),a.setState({vrvOptions:o}))},a.showReplyHandler=function(){a.setState({areRepliesVisible:!a.state.areRepliesVisible})},a.activateModal=function(){a.setState({helpWindowIsActive:!0})},a.deactivateModal=function(){a.setState({helpWindowIsActive:!1})},a.onAnnoTypeChange=function(e){return a.setState({annotationType:e.target.value,placeholder:e.target.placeholder,buttonContent:"Submit to your Solid POD"})},a.onFileSelected=function(e){a.setState({uri:e,fileSelected:!0})},a.onFtempoSearchButton=function(){console.debug("state update ".concat(a.state.ftempoSearchCounter)),a.setState({ftempoSearchCounter:a.state.ftempoSearchCounter+1,applicationMode:Be.Search})},a.state={annoValue:"",selection:[],annotationType:"describing",placeholder:"Add your annotation...",uri:"https://raw.githubusercontent.com/trompamusic-encodings/Mahler_Symphony_No4_Doblinger-4hands/master/Mahler_No4_1-Doblinger-4hands.mei",selectorString:"",buttonContent:"Submit to your Solid POD",replyAnnotationTarget:[],currentAnnotation:[],toggleAnnotationRetrieval:!1,hasContent:!0,fileSelected:!1,currentMedia:a.props.currentMedia||"",seekTo:"",measuresToAnnotationsMap:{},annoToDisplay:[],helpWindowIsActive:!1,replyAnnotationTargetId:"",areRepliesVisible:!1,ftempoSearchCounter:1,applicationMode:Be.Annotate,vrvOptions:{scale:50,adjustPageHeight:0,pageHeight:xe,pageWidth:je,footer:"none",unit:6}},a.handleSelectionChange=a.handleSelectionChange.bind(Object(x.a)(a)),a.handleScoreUpdate=a.handleScoreUpdate.bind(Object(x.a)(a)),a.handleStringChange=a.handleStringChange.bind(Object(x.a)(a)),a.onResponse=a.onResponse.bind(Object(x.a)(a)),a.onRefreshClick=a.onRefreshClick.bind(Object(x.a)(a)),a.onReceiveAnnotationContainerContent=a.onReceiveAnnotationContainerContent.bind(Object(x.a)(a)),a.onAnnoReplyHandler=a.onAnnoReplyHandler.bind(Object(x.a)(a)),a.convertCoords=a.convertCoords.bind(Object(x.a)(a)),a.onMediaClick=a.onMediaClick.bind(Object(x.a)(a)),a.handleAnnoShowingUpdate=a.handleAnnoShowingUpdate.bind(Object(x.a)(a)),a.player=r.a.createRef(),a.handlePageTurn=a.handlePageTurn.bind(Object(x.a)(a)),a}return Object(c.a)(n,[{key:"convertCoords",value:function(e){if(!document.getElementById(e.getAttribute("id"))||"none"===e.style.display||0===e.getBBox().x&&0===e.getBBox().y)return console.warn("Element unavailable on page: ",e.getAttribute("id")),{x:0,y:0,x2:0,y2:0};var t=e.getElementsByClassName("staff")[0],n=Array.prototype.filter.call(t.children,(function(e){return"path"===e.tagName}))[0].getBBox(),a=e.getBBox().x,o=n.width,r=e.getBBox().y,i=e.getBBox().height,s=e.closest("svg").parentElement.getBoundingClientRect(),l=e.getScreenCTM();return{x:l.a*a+l.c*r+l.e-s.left,y:l.b*a+l.d*r+l.f-s.top,x2:l.a*(a+o)+l.c*r+l.e-s.left,y2:l.b*a+l.d*(r+i)+l.f-s.top}}},{key:"handleStringChange",value:function(e){var t=this;this.setState({selectorString:e},(function(){return console.log(t.state.selectorString)}))}},{key:"handleSelectionChange",value:function(e){this.setState({selection:e})}},{key:"onAnnoReplyHandler",value:function(e,t){this.setState({annotationType:"replying",placeholder:"you are replying to the selected annotation",buttonContent:"Reply to selected Solid annotation",replyAnnotationTarget:e,replyAnnotationTargetId:t})}},{key:"onResponse",value:function(e){var t=this;console.log(e),201===e.status?this.setState({toggleAnnotationRetrieval:!0},(function(){document.querySelector(".loading").classList.remove("hidden"),t.setState({toggleAnnotationRetrieval:!1,annotationType:"describing",replyAnnotationTarget:[],replyAnnotationTargetId:"",placeholder:"Add your annotation...",annoToDisplay:[]})})):404===e.status&&alert("folder not found, check your annotation container path!")}},{key:"onRefreshClick",value:function(){var e=this;!1!==this.state.hasContent&&this.setState({toggleAnnotationRetrieval:!0},(function(){document.querySelector(".loading").classList.remove("hidden"),e.setState({toggleAnnotationRetrieval:!1,annotationType:"describing",replyAnnotationTarget:[],replyAnnotationTargetId:"",placeholder:"Add your annotation...",annoToDisplay:[]})}))}},{key:"onMediaClick",value:function(e){var t=this;console.log("button click",e);var n=e.split("#")[0],a=e.split("#")[1].replace("t=","");console.log("Setting up seek to: ",n,a),this.setState({currentMedia:n},(function(){return t.player.current.seekTo(a)}))}},{key:"onReceiveAnnotationContainerContent",value:function(e){var t=this;if(!e||!e.length)return alert("no annotation to retrieve"),Array.from(document.getElementsByClassName("inFocus")).forEach((function(e){return e.classList.remove("inFocus")})),document.querySelectorAll(".measureBox").forEach((function(e){return e.remove()})),document.querySelectorAll(".measureBoxBackground").forEach((function(e){return e.remove()})),void this.setState({hasContent:!1},(function(){console.log(t.state.hasContent,"no content to retrieve"),t.setState({hasContent:!0})}));var n=(e=e.filter((function(e){return e["@id"].endsWith(".jsonld")}))).map((function(e){var t=[];if("replying"!==e.motivation){var n=e.target.map((function(e){var t=e.id,n=t.substr(t.lastIndexOf("#")),a=document.querySelector(n),o="";return a&&(o=a.closest(".measure")),o})).filter((function(e){return e}));t=Object(O.a)(new Set(n))}return{annoId:e["@id"],measures:t}})),a={};n.forEach((function(e){e.measures.forEach((function(t){var n=t.getAttribute("id");n in a?a[n].push(e.annoId):a[n]=[e.annoId]}))})),this.setState({currentAnnotation:e,measuresToAnnotationsMap:a},(function(){Array.from(document.getElementsByClassName("inFocus")).forEach((function(e){return e.classList.remove("inFocus")})),document.querySelectorAll(".measureBox").forEach((function(e){return e.remove()})),document.querySelectorAll(".measureBoxBackground").forEach((function(e){return e.remove()})),console.log("Mapped annotaitons ",a),console.log("current annotations ",e);var n=Object.keys(t.state.measuresToAnnotationsMap).filter((function(e){return document.querySelectorAll("#"+e).length}));console.log("Annotated measures on screen: ",n),n.forEach((function(n){var a=t.convertCoords(document.querySelector("#"+n));console.log("Coords: ",a);var o=document.createElement("div"),r=document.createElement("div"),i={left:Math.floor(a.x),top:Math.floor(a.y),width:Math.ceil(a.x2-a.x),height:Math.ceil(a.y2-a.y)};console.log("Coords box: ",i),o.setAttribute("id","measureBox-"+n),o.setAttribute("class","measureBox"),o.setAttribute("style","position: absolute;background: rgba(0, 0, 0, 0);left: "+i.left+"px;top: "+i.top+"px;width: "+i.width+"px;height: "+i.height+"px;z-index: 1"),r.setAttribute("id","measureBoxBackground-"+n),r.setAttribute("class","measureBoxBackground"),r.classList.remove("isOpen"),r.classList.add("isClosed"),r.setAttribute("style","position: absolute;left: "+i.left+"px;top: "+i.top+"px;width: "+i.width+"px;height: "+i.height+"px;z-index: -1"),console.log("TRYING TO DRAW",o),document.querySelector(".annotationBoxesContainer").appendChild(o),document.querySelector(".annotationBoxesContainer").appendChild(r),o.onclick=function(a){Array.from(document.getElementsByClassName("inFocus")).forEach((function(e){return e.classList.remove("inFocus")}));var o=document.querySelectorAll(".measureBoxBackground"),r=a.target.closest(".measureBox");o.forEach((function(e){e.classList.add("isClosed"),e.classList.remove("isOpen");var t=e.id.split("measureBoxBackground-")[1];r.id.split("measureBox-")[1]===t&&(e.classList.remove("isClosed"),e.classList.add("isOpen"))}));var i=Array.from(document.getElementsByClassName("showReply"));if(console.log("no longer showing ",i),i.length){!0===t.state.areRepliesVisible&&t.setState({areRepliesVisible:!1});var s=document.querySelector(".listContainer");console.log(s),i.forEach((function(e){e.classList.add("hiddenReply"),s.appendChild(e)})),i.forEach((function(e){return e.classList.remove("showReply")}))}t.handleAnnoShowingUpdate(e,n)}}))})),console.log("iteration succeded"),e.forEach((function(e){"replying"!==e.motivation&&e.target.forEach((function(t){var n=e.body,a=t.id,o=a.substr(a.lastIndexOf("#")),r=document.querySelector(o);if(!r)return console.warn("no content has been found");var i=e["@id"],s=i.substr(i.lastIndexOf("/")+1);switch(e.motivation){case"describing":n.length&&"value"in n[0]&&r.classList.add("focus-"+s);break;case"linking":n.length&&(r.classList.add("focus-"+s),r.classList.add("focus-"+s));break;case"trompa:cueMedia":case"trompa:cueImage":n.length&&r.classList.add("focus-"+s);break;case"trompa:playlist":return;default:console.log("sorry, don't know what to do for this annotation boss")}}))})),document.querySelector(".loading").classList.add("hidden")}},{key:"handleAnnoShowingUpdate",value:function(e,t){var n=e.map((function(e){return e["@id"]})),a=this.state.measuresToAnnotationsMap[t],o=n.filter((function(e){return a.includes(e)})),r=[].concat(Object(O.a)(o),Object(O.a)(e.filter((function(e){return"replying"===e.motivation})).map((function(e){return e["@id"]}))));console.log("to display: ",r),this.setState({annoToDisplay:r})}},{key:"handleScoreUpdate",value:function(e){console.log("Received updated score DOM element: ",e),this.onRefreshClick()}},{key:"handlePageTurn",value:function(){document.querySelectorAll(".measureBox").forEach((function(e){return e.remove()})),document.querySelectorAll(".measureBoxBackground").forEach((function(e){return e.remove()}))}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,!this.state.fileSelected&&r.a.createElement(Ee,{onSelect:this.onFileSelected,defaultUrl:this.state.uri,placeholder:"mahler four hands rendition..."}),this.state.fileSelected&&r.a.createElement("div",null,r.a.createElement("div",{className:"scoreContainer"},r.a.createElement("div",{className:"annotationBoxesContainer"}),r.a.createElement(j.a,{uri:this.state.uri,annotationContainerUri:this.props.submitUri,vrvOptions:this.state.vrvOptions,onSelectionChange:this.handleSelectionChange,selectorString:this.state.selectorString,onScoreUpdate:this.handleScoreUpdate,onReceiveAnnotationContainerContent:this.onReceiveAnnotationContainerContent,toggleAnnotationRetrieval:this.state.toggleAnnotationRetrieval,selectionArea:".scoreContainer"})),r.a.createElement("div",{className:"controls"},r.a.createElement("div",{className:"prevPageButton",onClick:this.handlePageTurn},r.a.createElement(T.a,{buttonContent:r.a.createElement("img",{src:te.a,alt:"previous page"}),uri:this.state.uri})),r.a.createElement("button",{onClick:this.zoomOut,className:"zoomOut"},r.a.createElement("img",{src:re.a,alt:"zoom out"})),r.a.createElement("button",{onClick:this.zoomIn,className:"zoomIn"},r.a.createElement("img",{src:se.a,alt:"zoom in"})),r.a.createElement("div",{className:"nextPageButton",onClick:this.handlePageTurn},r.a.createElement(B.a,{buttonContent:r.a.createElement("img",{src:ae.a,alt:"next page"}),uri:this.state.uri})))),this.state.fileSelected&&r.a.createElement(Se,{onButtonPress:this.onFtempoSearchButton,vrvToolkit:this.props.score.vrvTk,counter:this.state.ftempoSearchCounter}),this.state.applicationMode===Be.Annotate&&r.a.createElement("div",null,r.a.createElement(H,{selectorString:this.state.selectorString,handleStringChange:this.handleStringChange}),r.a.createElement(M,{onAnnoTypeChange:this.onAnnoTypeChange,uri:this.state.uri,submitUri:this.props.submitUri,selection:this.state.selection,onResponse:this.onResponse,onRefreshClick:this.onRefreshClick,annotationType:this.state.annotationType,placeholder:this.state.placeholder,replyAnnotationTarget:this.state.replyAnnotationTarget,buttonContent:this.state.buttonContent,creator:this.props.userId,selectorString:this.state.selectorString,replyAnnotationTargetId:this.state.replyAnnotationTargetId,replyAnnoBody:this.state.replyAnnoBody}),r.a.createElement($,{allEntries:this.state.currentAnnotation,onRefreshClick:this.onRefreshClick}),r.a.createElement(G,{allEntries:this.state.currentAnnotation,filteringEntries:this.state.annoToDisplay,onAnnoReplyHandler:this.onAnnoReplyHandler,onMediaClick:this.onMediaClick,replyAnnotationTarget:this.state.replyAnnotationTarget,showReplyHandler:this.showReplyHandler,areRepliesVisible:this.state.areRepliesVisible,onRefreshClick:this.onRefreshClick}),r.a.createElement("div",{className:"loading hidden"},"Loading...",r.a.createElement("svg",{viewBox:"0 0 100 100",xmlns:"http://www.w3.org/2000/svg",className:"loader",height:"100%",width:"100%"},r.a.createElement("circle",{cx:"50",cy:"50",r:"45"}))),r.a.createElement(X.a,{width:"80%",height:"80%",ref:this.player,url:this.state.currentMedia,controls:!0,onReady:function(){e.state.seekTo&&(console.log("Seeking to: ",e.state.seekTo),e.player.current.seekTo(Math.floor(e.state.seekTo)),e.setState({seekTo:""}))}})),r.a.createElement("div",null,r.a.createElement("button",{onClick:this.activateModal,style:{padding:"5px",marginTop:"5px",marginLeft:"5px"}},"help"),r.a.createElement(ue,{isOpen:this.state.helpWindowIsActive,onRequestClose:this.deactivateModal})))}}]),n}(o.Component);var Re=Object(h.b)((function(e){return{score:e.score}}),(function(e){return Object(p.b)({},e)}),!1,{forwardRef:!0})(Te),Ne=n(255),Ie=n.n(Ne);function Me(e){b.a.context.extend({trompa:"http://vocab.trompamusic.eu/vocab#"});var t=Object(E.a)("user.storage"),n=Object(E.a)("user"),a=Object(o.useState)("private/"),i=Object(y.a)(a,2),s=i[0],l=i[1];return r.a.createElement("div",{id:"authWrapper"},r.a.createElement(C.a,null,r.a.createElement("div",null,r.a.createElement("a",{href:"https://trompamusic.eu/",target:"_blank",rel:"noopener noreferrer"},r.a.createElement("img",{src:Ie.a,alt:"trompa logo"})),r.a.createElement("p",null,r.a.createElement(A.a,{className:"loginButton",popup:"auth-popup.html"},"Log in with Solid")))),r.a.createElement(w.a,null,r.a.createElement("a",{href:"https://trompamusic.eu/",target:"_blank",rel:"noopener noreferrer"},r.a.createElement("img",{src:Ie.a,alt:"trompa logo"})),r.a.createElement("h2",null,"Music scholars annotation tool"),r.a.createElement("p",null,"You are logged in as"," ",r.a.createElement("a",{href:n,target:"_blank",rel:"noopener noreferrer"},r.a.createElement(S.a,{src:"user.name"}))),r.a.createElement("p",{title:"close the current session and quit the app"},r.a.createElement(k.a,{className:"logoutButton"},"Log out")),r.a.createElement("p",null,"Specify the annotation container path inside your Pod:"),r.a.createElement("div",null,r.a.createElement("input",{title:"enter your preferred POD folder",type:"text",placeholder:"private/",onChange:function(e){e.target.value&&l(e.target.value)},className:"sizedTextBox"})),"undefined"!==typeof t?r.a.createElement(Re,{uri:e.uri,podUri:"".concat(t),submitUri:"".concat(t)+s,userId:"".concat(n)}):r.a.createElement("div",null,"Loading... ")))}var De=Object(p.a)(m.a,g.a)(p.d),Pe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).state={MEI_URI:"Mahler.mei"},a.store=Object(p.d)(v.a),a}return Object(c.a)(n,[{key:"render",value:function(){return r.a.createElement(h.a,{store:De(v.a)},r.a.createElement(Me,{uri:this.state.MEI_URI,handleMEIInput:this.handleMEIInput,onChange:this.onChange,value:this.state.value}))}}]),n}(o.Component),He=new me.ApolloClient({uri:"https://api.trompamusic.eu",cache:new me.InMemoryCache}),Le=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"render",value:function(){var e=Object(p.a)(m.a,g.a)(p.d);return r.a.createElement(h.a,{store:e(v.a)},r.a.createElement(me.ApolloProvider,{client:He},r.a.createElement(Pe,null)))}}]),n}(o.Component);s.a.render(r.a.createElement(Le,null),document.querySelector(".container"))}},[[501,1,2]]]);
//# sourceMappingURL=main.4324812d.chunk.js.map