{"version":3,"sources":["graphics/top-bar-logo_0_0.png","graphics/play-solid.svg","graphics/arrow-to-left-regular.svg","graphics/arrow-to-right-regular.svg","graphics/search-minus-solid.svg","graphics/search-plus-solid.svg","annotations/addAnnotation.js","annotations/annotationSubmitter.js","annotations/checkBox.js","annotations/selectionHandler.js","annotations/annotationItem.js","annotations/annotationList.js","annotations/playlistItem.js","annotations/renditionsPlaylist.js","containers/HelpModal.jsx","containers/FileSelector.jsx","search/SearchQuery.js","containers/FtempoSearch.jsx","containers/selectableScoreApp.js","containers/solidWrapper.js","containers/selectableScoreWrapper.js","App.jsx","index.js"],"names":["module","exports","AddAnnotation","state","value","seconds","target","buttonStatus","onChange","e","setState","onTimeChange","console","log","this","handlerArgs","props","annotationType","type","name","placeholder","className","id","pattern","title","aria-hidden","focusable","data-prefix","data-icon","role","xmlns","viewBox","width","height","display","fill","d","buttonContent","submitUri","submitHandler","submitHandlerArgs","onResponse","onClick","onRefreshClick","React","Component","AnnotationSubmitter","textArea","current","wipeState","selection","map","elem","uri","getAttribute","body","uuidv4","motivation","created","Date","toISOString","creator","replyAnnotationTargetId","createRef","onAnnoTypeChange","checked","disabled","ref","selectorString","Checkbox","label","key","Selectors","SelectionHandler","createCheckbox","option","updateSelectorList","buildCheckboxes","concat","handleStringChange","filter","val","AnnotationItem","showDetails","preventDefault","stopPropagation","parent","closest","details","querySelector","isVisible","classList","remove","add","visibleDetails","showReplyDetails","replyTarget","annotation","replyTargetId","onAnnoReplyHandler","showConfirm","confirmScreen","isConfirmVisible","visibleConfirm","onPlayClick","bodyMedia","onMediaClick","onPreviewclick","_children","children","isPictureShowing","previewButtonContent","document","addEventListener","onShowReplyClick","rootAnno","replyTargetAnnos","querySelectorAll","length","forEach","replyTargetAnno","replyTargetAnnoId","dataset","replyAnnotationTarget","rootAnnoTargetId","selfId","areRepliesVisible","isClicked","appendChild","showReplyHandler","noLongerShowing","Array","from","getElementsByClassName","noReplyShowing","showing","showingReply","annoContainer","warn","renderSwitch","permission","modifyPermissionsElement","date","todaysDateISO","creationDate","split","compareDate","String","replies","areRepliesPresent","reply","datasetWithAcl","getPublicAccess","read","Object","keys","getAgentAccessAll","userMayModifyAccess","grantPublic","icons","unchecked","vertical-align","revokePublic","commonAnnoComponents","deleteAnno","style","paddingTop","onMouseEnter","onMouseLeave","replyButtonsCluster","showRepliesButtonContent","bodyD","bodyL","repTarget","data-target","data-self-id","startsWith","href","rel","appendURL","cleanMediaString","src","PlayLogo","alt","alignContent","textAlign","maxWidth","maxHeight","marginTop","data-reply-annotation-target","resourceAcl","aclModified","userId","resp","bind","updateDatasetAcl","testReplyRetrieval","auth","fetch","method","then","a","response","json","data","ok","error","message","status","Promise","reject","catch","currentSession","s","getSolidDatasetWithAcl","hasResourceAcl","getResourceAcl","now","hasAccessibleAcl","hasFallbackAcl","createAclFromFallbackAcl","userControllableResourceAcl","setAgentResourceAccess","webId","append","write","control","nextProps","nextState","updatedAcl","setPublicResourceAccess","saveAclFor","AnnotationList","order","sortedFilteredAnno","allEntries","anno","filteringEntries","includes","sort","b","localeCompare","focusId","currentTarget","c","noFocusElement","focusElement","item","annoIdFragment","substr","lastIndexOf","PlaylistItem","delete","link","frameBorder","renditionsPlaylist","visible","HelpModal","render","isOpen","onRequestClose","contentLabel","overlayClassName","ariaHideApp","overflow","EARLY_MUSIC_WORKS","gql","SearchResults","query","useQuery","variables","loading","debug","works","ItemList","compositions","itemListElement","identifier","contributor","composer","workExample","source","onSelect","PropTypes","string","func","FileSelector","handleChange","event","fieldValue","handleSearchChange","searchValue","handleSubmit","defaultValue","handleSearch","showResults","handleSearchResultSelection","attributes","defaultUrl","searchResults","onSubmit","parseMei","staffDefinitions","getElementsByTagName","staffs","sd","staffLabel","innerHTML","n","notes","measures","measure","measureStaffs","staff","measureStaffId","note","nattrs","push","pitch","pname","oct","parseInt","i","pitchesToIntervalMapping","pitches","interval_mapping","alphabet","pitch_nums","indexOf","toUpperCase","pitch_intervals","letter","Math","abs","join","FtempoSearch","buttonPressed","searchReady","onButtonPress","onValueChange","selectedOption","doSearch","selectedVoice","meiVoiceQueryStrings","codestring","headers","JSON","stringify","prevProps","prevState","snapshot","counter","mei","vrvToolkit","getMEI","meiDoc","DOMParser","parseFromString","documentElement","nodeName","allowZeroExpanded","viewPortHeight","window","outerHeight","viewPortWidth","outerWidth","defaultVerovioHeight","defaultVerovioWidth","ApplicationMode","freeze","Annotate","Search","SelectableScoreApp","zoomIn","initialZoom","vrvOptions","scale","initialHeight","pageHeight","initialWidth","pageWidth","newVrvOptions","assign","zoomOut","activateModal","helpWindowIsActive","deactivateModal","onFileSelected","fileSelected","onFtempoSearchButton","ftempoSearchCounter","applicationMode","annoValue","currentAnnotation","toggleAnnotationRetrieval","hasContent","currentMedia","seekTo","measuresToAnnotationsMap","annoToDisplay","adjustPageHeight","footer","unit","handleSelectionChange","handleScoreUpdate","onReceiveAnnotationContainerContent","convertCoords","handleAnnoShowingUpdate","player","handlePageTurn","getElementById","getBBox","x","y","x2","y2","staff1","bbox","prototype","call","tagName","offset","parentElement","getBoundingClientRect","matrix","getScreenCTM","left","f","top","alert","replace","content","mb","measuresToAnnotationsMapList","endsWith","distinctMeasures","jsonTarget","targetId","fragment","element","el","Set","annoId","newMap","measureToAnnoMap","m","mId","annotatedMeasuresOnScreen","measureId","coords","measureBox","createElement","measureBoxBackground","coordsBox","floor","ceil","setAttribute","onclick","bgBoxes","frontBox","box","bgBoxId","bodies","_annoIds","jsonIds","_filteredAnnoIds","compare","annotationsToDisplay","scoreElement","annotationContainerUri","onSelectionChange","onScoreUpdate","selectionArea","ArrowToLeft","SearchMinus","SearchPlus","ArrowToRight","score","vrvTk","replyAnnoBody","cx","cy","r","url","controls","onReady","padding","marginLeft","connect","dispatch","bindActionCreators","forwardRef","SolidWrapper","context","extend","trompa","userPOD","useLDflexValue","useState","userInput","setUserInput","LoggedOut","Logo","LoginButton","popup","LoggedIn","Value","LogoutButton","podUri","createStoreWithMiddleware","applyMiddleware","thunk","ReduxPromise","createStore","SelectableScoreWrapper","MEI_URI","store","reducers","handleMEIInput","client","ApolloClient","cache","InMemoryCache","App","ReactDOM"],"mappings":"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","file":"static/js/main.c276d5c3.chunk.js","sourcesContent":["module.exports = \"data:image/png;base64,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\"","module.exports = __webpack_public_path__ + \"static/media/play-solid.f79fe6ae.svg\";","module.exports = __webpack_public_path__ + \"static/media/arrow-to-left-regular.1bf90cef.svg\";","module.exports = __webpack_public_path__ + \"static/media/arrow-to-right-regular.f0cdfa6a.svg\";","module.exports = __webpack_public_path__ + \"static/media/search-minus-solid.bc6bab64.svg\";","module.exports = __webpack_public_path__ + \"static/media/search-plus-solid.5485d017.svg\";","/* addAnnotation contains the submitButton component imported from the selectable score component, this handles the logic behind the POST to solid */\n/* also the input field changes based on the chosen annotation motivation*/\nimport React from \"react\";\nimport SubmitButton from \"selectable-score/lib/submit-button.js\";\n\nexport class AddAnnotation extends React.Component {\n  state = {\n    value: \"\",\n    seconds: \"\",\n    target: [],\n    buttonStatus: \"disabledSubmitButton\",\n  };\n  onChange = (e) => this.setState({ value: e.target.value });\n\n  onTimeChange = (e) =>\n    this.setState({ seconds: e.target.value }, () =>\n      console.log(this.state.seconds)\n    );\n\n  wipeState() {\n    this.setState({ value: \"\", seconds: \"\" });\n  }\n\n  render() {\n    //packages the two states in one variable. The submithandlerArgs then are read with .value and .seconds from the submitHandler function\n    let value = this.state.value;\n    let seconds = this.state.seconds;\n    let handlerArgs = {\n      value,\n      seconds,\n    };\n\n    return (\n      <div>\n        {this.props.annotationType === \"playlist\" && (\n          <div>\n            <input\n              type=\"text\"\n              value={this.state.value}\n              name=\"value\"\n              placeholder=\"enter link here\"\n              onChange={this.onChange}\n              className=\"sizedTextBox\"\n            />\n            <span> with title: </span>\n            <input\n              type=\"text\"\n              placeholder=\"title\"\n              name=\"seconds\"\n              value={this.state.seconds}\n              onChange={this.onTimeChange}\n              className=\"sizedTextBox\"\n            />\n          </div>\n        )}\n        {this.props.annotationType !== \"cueMedia\" && (\n          <textarea\n            className=\"textArea\"\n            id=\"annotationContent\"\n            name=\"value\"\n            value={this.state.value}\n            placeholder={this.props.placeholder}\n            onChange={this.onChange}\n          />\n        )}\n        {this.props.annotationType === \"cueMedia\" && (\n          <div>\n            <input\n              type=\"text\"\n              value={this.state.value}\n              name=\"value\"\n              placeholder=\"enter link here\"\n              onChange={this.onChange}\n              className=\"sizedTextBox\"\n            />\n            <span> jump to: </span>\n            <input\n              type=\"text\"\n              pattern=\"[0-9]\"\n              placeholder=\"seconds\"\n              name=\"seconds\"\n              value={this.state.seconds}\n              onChange={this.onTimeChange}\n              className=\"sizedTextBox\"\n            />\n          </div>\n        )}\n        {this.state.value && (\n          <button\n            className=\"enabledSubmitButton\"\n            title=\"click to post your annotation to your solid POD\"\n          >\n            <svg\n              aria-hidden=\"true\"\n              focusable=\"false\"\n              data-prefix=\"far\"\n              data-icon=\"arrow-alt-to-top\"\n              className=\"svg-inline--fa fa-arrow-alt-to-top fa-w-12\"\n              role=\"img\"\n              xmlns=\"http://www.w3.org/2000/svg\"\n              viewBox=\"0 0 384 512\"\n              width=\"1em\"\n              height=\"1em\"\n              display=\"inline-flex\"\n            >\n              <path\n                fill=\"white\"\n                d=\"M48 336h51.6v96c0 26.5 21.5 48 48 48h88.6c26.5 0 48-21.5 48-48v-96h51.6c42.6 0 64.2-51.7 33.9-81.9l-143.9-144c-18.7-18.7-49.1-18.7-67.9 0l-144 144C-16 284.2 5.3 336 48 336zm144-192l144 144h-99.7v144h-88.6V288H48l144-144zM0 68V44c0-6.6 5.4-12 12-12h360c6.6 0 12 5.4 12 12v24c0 6.6-5.4 12-12 12H12C5.4 80 0 74.6 0 68z\"\n              ></path>\n            </svg>{\" \"}\n            <SubmitButton\n              buttonContent={this.props.buttonContent}\n              submitUri={this.props.submitUri}\n              submitHandler={this.props.submitHandler}\n              submitHandlerArgs={handlerArgs}\n              onResponse={this.props.onResponse}\n            />\n          </button>\n        )}\n        {!this.state.value && (\n          <button\n            className=\"disabledSubmitButton\"\n            title=\"click to post your annotation to your solid POD\"\n          >\n            <svg\n              aria-hidden=\"true\"\n              focusable=\"false\"\n              data-prefix=\"far\"\n              data-icon=\"file-import\"\n              className=\"svg-inline--fa fa-file-import fa-w-16\"\n              role=\"img\"\n              xmlns=\"http://www.w3.org/2000/svg\"\n              viewBox=\"0 0 512 512\"\n              width=\"1em\"\n              height=\"1em\"\n              display=\"inline-flex\"\n            >\n              <path\n                fill=\"white\"\n                d=\"M497.83 97.98L413.94 14.1c-9-9-21.2-14.1-33.89-14.1H175.99C149.5.1 128 21.6 128 48.09v215.98H12c-6.63 0-12 5.37-12 12v24c0 6.63 5.37 12 12 12h276v48.88c0 10.71 12.97 16.05 20.52 8.45l71.77-72.31c4.95-4.99 4.95-13.04 0-18.03l-71.77-72.31c-7.55-7.6-20.52-2.26-20.52 8.45v48.88H175.99V48.09h159.97v103.98c0 13.3 10.7 23.99 24 23.99H464v287.95H175.99V360.07H128v103.94c0 26.49 21.5 47.99 47.99 47.99h287.94c26.5 0 48.07-21.5 48.07-47.99V131.97c0-12.69-5.17-24.99-14.17-33.99zm-113.88 30.09V51.99l76.09 76.08h-76.09z\"\n              ></path>\n            </svg>{\" \"}\n            <SubmitButton\n              buttonContent=\"Write something to begin...\"\n              submitUri={this.props.submitUri}\n              submitHandler={this.props.submitHandler}\n              submitHandlerArgs={handlerArgs}\n              onResponse={this.props.onResponse}\n            />\n          </button>\n        )}\n\n        <button\n          onClick={this.props.onRefreshClick}\n          className=\"refreshButton\"\n          title=\"click to display the annotation contained in your solid POD\"\n        >\n          <svg\n            aria-hidden=\"true\"\n            focusable=\"false\"\n            data-prefix=\"fas\"\n            data-icon=\"redo-alt\"\n            className=\"svg-inline--fa fa-redo-alt fa-w-16\"\n            role=\"img\"\n            xmlns=\"http://www.w3.org/2000/svg\"\n            viewBox=\"0 0 512 512\"\n            width=\"1em\"\n            height=\"1em\"\n            display=\"inline-flex\"\n          >\n            <path\n              fill=\"white\"\n              d=\"M256.455 8c66.269.119 126.437 26.233 170.859 68.685l35.715-35.715C478.149 25.851 504 36.559 504 57.941V192c0 13.255-10.745 24-24 24H345.941c-21.382 0-32.09-25.851-16.971-40.971l41.75-41.75c-30.864-28.899-70.801-44.907-113.23-45.273-92.398-.798-170.283 73.977-169.484 169.442C88.764 348.009 162.184 424 256 424c41.127 0 79.997-14.678 110.629-41.556 4.743-4.161 11.906-3.908 16.368.553l39.662 39.662c4.872 4.872 4.631 12.815-.482 17.433C378.202 479.813 319.926 504 256 504 119.034 504 8.001 392.967 8 256.002 7.999 119.193 119.646 7.755 256.455 8z\"\n            ></path>\n          </svg>\n\n          <span>{\"\"} Fetch Annotations</span>\n        </button>\n      </div>\n    );\n  }\n}\n\nexport default AddAnnotation;\n\n/* old */\n/* <button\n          style={{ padding: \"5px\", marginBottom: \"5px\" }}\n          onClick={() => this.setState({ visible: !visible })}\n        >\n          Toggle legend\n        </button>\n        {this.state.visible === true && (\n          <div>\n            <h4>Annotation legend</h4>\n\n            <span className=\"selectionLegend\" />\n            <span>currently selected</span>\n\n            <span className=\"descriptionLegend\" />\n            <span>descriptive annotation</span>\n\n            <span className=\"linkingLegend\" />\n            <span>linking annotation</span>\n\n            <span className=\"cueMediaLegend\" />\n            <span>cue media annotation</span>\n\n            <span className=\"replyLegend\" />\n            <span>replying annotation</span>\n\n            <span className=\"focusLegend\" />\n            <span>highlighted annotation</span>\n          </div>\n        )} */\n","/* annotation submitter takes the handlerArgs passed from the addAnnotaiton script and builds the jsonLd structure of each annotation based on its motivation */\n/* it also renders the radio button array to selecte the annotation motivation  */\nimport React from \"react\";\nimport { v4 as uuidv4 } from \"uuid\";\nimport AddAnnotation from \"./addAnnotation.js\";\n\nexport class AnnotationSubmitter extends React.Component {\n  constructor(props) {\n    super(props);\n    this.textArea = React.createRef();\n  }\n  submitHandler = (handlerArgs) => {\n    this.textArea.current.wipeState();\n    //adds different annotations based on selection\n    //let replyAnnotationTargetId = this.props.replyAnnotationTargetId;\n    let value = handlerArgs.value;\n    let seconds = handlerArgs.seconds;\n\n    switch (this.props.annotationType) {\n      case \"describing\":\n        return {\n          \"@context\": \"http://www.w3.org/ns/anno.jsonld\",\n          target: this.props.selection.map((elem) => {\n            return { id: this.props.uri + \"#\" + elem.getAttribute(\"id\") };\n          }), //this takes the measure id selected by the user\n          type: \"Annotation\",\n          body: [{ id: uuidv4(), type: \"TextualBody\", value }], //this takes the user input\n          motivation: \"describing\",\n          created: new Date().toISOString(),\n          creator: this.props.creator,\n        };\n\n      case \"linking\":\n        return {\n          \"@context\": \"http://www.w3.org/ns/anno.jsonld\",\n          target: this.props.selection.map((elem) => {\n            return { id: this.props.uri + \"#\" + elem.getAttribute(\"id\") };\n          }), //this takes the measure id selected by the user\n          type: \"Annotation\",\n          body: [{ id: value }], //this takes the user URI\n          motivation: \"linking\",\n          created: new Date().toISOString(),\n          creator: this.props.creator,\n        };\n\n      case \"cueMedia\":\n        return {\n          \"@context\": \"http://www.w3.org/ns/anno.jsonld\",\n          target: this.props.selection.map((elem) => {\n            return { id: this.props.uri + \"#\" + elem.getAttribute(\"id\") };\n          }), //this takes the measure id selected by the user\n          type: \"Annotation\",\n          body: [{ id: value + \"#t=\" + seconds }], //this takes the user link + time offest\n          motivation: \"trompa:cueMedia\",\n          created: new Date().toISOString(),\n          creator: this.props.creator,\n        };\n\n      case \"image\":\n        return {\n          \"@context\": \"http://www.w3.org/ns/anno.jsonld\",\n          target: this.props.selection.map((elem) => {\n            return { id: this.props.uri + \"#\" + elem.getAttribute(\"id\") };\n          }), //this takes the measure id selected by the user\n          type: \"Annotation\",\n          body: [{ id: value }], //this takes the user image link\n          motivation: \"trompa:cueImage\",\n          created: new Date().toISOString(),\n          creator: this.props.creator,\n        };\n\n      case \"playlist\":\n        return {\n          \"@context\": \"http://www.w3.org/ns/anno.jsonld\",\n          target: this.props.selection.map((elem) => {\n            return { id: this.props.uri + \"#\" + elem.getAttribute(\"id\") };\n          }), //this takes the measure id selected by the user\n          type: \"Annotation\",\n          body: [{ id: uuidv4(), type: \"TextualBody\", seconds, value }], //this takes the user input\n          motivation: \"trompa:playlist\",\n          created: new Date().toISOString(),\n          creator: this.props.creator,\n        };\n\n      case \"replying\":\n        return {\n          \"@context\": \"http://www.w3.org/ns/anno.jsonld\",\n          target: this.props.replyAnnotationTargetId, //this takes the annotation ID being replied to\n          type: \"Annotation\",\n          body: [{ id: uuidv4(), type: \"TextualBody\", value }], //this takes the user input\n          motivation: \"replying\",\n          created: new Date().toISOString(),\n          creator: this.props.creator,\n        };\n\n      default:\n        console.log(\n          \"no annotation found, have you selected the annotation type?\"\n        );\n    }\n  };\n\n  render() {\n    return (\n      <div className=\"App\">\n        <div className=\"container\">\n          <h3>Annotation type</h3>\n          <label>\n            <input\n              title=\"adds a textual content to the annotation\"\n              type=\"radio\"\n              name=\"annotationType\"\n              value=\"describing\"\n              placeholder=\"Add your annotation...\"\n              onChange={this.props.onAnnoTypeChange}\n              checked={this.props.annotationType === \"describing\"}\n            />\n            Describing\n          </label>\n          <label>\n            <input\n              title=\"links external resources to the annotation\"\n              type=\"radio\"\n              value=\"linking\"\n              name=\"annotationType\"\n              placeholder=\"Insert your URI link...\"\n              onChange={this.props.onAnnoTypeChange}\n              checked={this.props.annotationType === \"linking\"}\n            />\n            Linking\n          </label>\n          <label>\n            <input\n              title=\"links a media content to the annotation\"\n              type=\"radio\"\n              value=\"cueMedia\"\n              name=\"annotationType\"\n              onChange={this.props.onAnnoTypeChange}\n              checked={this.props.annotationType === \"cueMedia\"}\n            />\n            Cue Media\n          </label>\n          <label>\n            <input\n              title=\"links an image content to the annotation\"\n              type=\"radio\"\n              value=\"image\"\n              name=\"annotationType\"\n              placeholder=\"Insert your image link...\"\n              onChange={this.props.onAnnoTypeChange}\n              checked={this.props.annotationType === \"image\"}\n            />\n            Image\n          </label>\n          <label>\n            <input\n              title=\"playlist\"\n              type=\"radio\"\n              value=\"playlist\"\n              name=\"annotationType\"\n              onChange={this.props.onAnnoTypeChange}\n              checked={this.props.annotationType === \"playlist\"}\n            />\n            Playlist\n          </label>\n          <label>\n            <input\n              title=\"will be used when the reply button is clicked\"\n              type=\"radio\"\n              value=\"reply\"\n              name=\"annotationType\"\n              disabled={true}\n              checked={this.props.annotationType === \"replying\"}\n            />\n            Reply\n          </label>\n          <div className=\"addAnnotations\">\n            <AddAnnotation\n              ref={this.textArea}\n              annotationType={this.props.annotationType}\n              submitUri={this.props.submitUri}\n              placeholder={this.props.placeholder}\n              submitHandler={this.submitHandler}\n              onResponse={this.props.onResponse}\n              onRefreshClick={this.props.onRefreshClick}\n              buttonContent={this.props.buttonContent}\n              selectorString={this.props.selectorString}\n            />\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default AnnotationSubmitter;\n","/* simple checkbox component */\nimport React from 'react'\n\nconst Checkbox = ({ label, onClick }) => (\n  <span>\n    <label>\n      <input\n        type='checkbox'\n        name={label.name}\n        onClick={onClick}\n        value={label.value}\n        key={label.value}\n      />\n      {label.name}\n    </label>\n  </span>\n)\n\nexport default Checkbox\n","/* manages the rendering of the checkbox component mapping across the selectors const */\n/* and uses updateSelectorList to update the selectorString Prop passed from the selctableScore main app*/\n\nimport React, { Component } from \"react\";\nimport Checkbox from \"./checkBox\";\nconst Selectors = [\n  {\n    name: \"Note\",\n    value: \".note\",\n  },\n\n  {\n    name: \"Measure\",\n    value: \".measure\",\n  },\n\n  {\n    name: \"Dynamics\",\n    value: \".dynam\",\n  },\n\n  {\n    name: \"Directives\",\n    value: \".dir\",\n  },\n];\n\nexport default class SelectionHandler extends Component {\n  state = {\n    selectorString: [],\n  };\n\n  updateSelectorList(e, value) {\n    if (e.target.checked) {\n      //append to array\n      this.setState(\n        {\n          selectorString: this.state.selectorString.concat([value]),\n        },\n        () => {\n          this.props.handleStringChange(this.state.selectorString);\n        }\n      );\n    } else {\n      //remove from array\n      this.setState(\n        {\n          selectorString: this.state.selectorString.filter(function (val) {\n            return val !== value;\n          }),\n        },\n        () => {\n          this.props.handleStringChange(this.state.selectorString);\n        }\n      );\n    }\n  }\n\n  createCheckbox = (option) => (\n    <Checkbox\n      label={option}\n      onClick={(e) => this.updateSelectorList(e, option.value)}\n      key={option.value}\n    />\n  );\n\n  buildCheckboxes = () => Selectors.map(this.createCheckbox);\n\n  render() {\n    return (\n      <div>\n        <h3>Selection type</h3>\n        <form>{this.buildCheckboxes()}</form>\n      </div>\n    );\n  }\n}\n","/* item that contains the annotation contents, the renderSwitch function assign specific display to the specfic anntation based on its motivation*/\nimport React from \"react\";\nimport auth from \"solid-auth-client\";\nimport Toggle from \"react-toggle\";\nimport {\n  getSolidDatasetWithAcl,\n  hasResourceAcl,\n  hasFallbackAcl,\n  hasAccessibleAcl,\n  // eslint-disable-next-line\n  createAcl,\n  createAclFromFallbackAcl,\n  getResourceAcl,\n  setAgentResourceAccess,\n  setPublicResourceAccess,\n  saveAclFor,\n  // eslint-disable-next-line\n  getSolidDataset,\n  getPublicAccess,\n  getAgentAccessAll,\n} from \"@inrupt/solid-client\";\n\nimport PlayLogo from \"../graphics/play-solid.svg\";\nclass AnnotationItem extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      isClicked: false,\n      userMayModifyAccess: false,\n      resourceAcl: null,\n      aclModified: false,\n      datasetWithAcl: null,\n      userId: null,\n      isPictureShowing: false,\n      previewButtonContent: \"Show preview\",\n      showRepliesButtonContent: \"Toggle replies\",\n      isConfirmVisible: false,\n      isVisible: false,\n      resp: \"\",\n    };\n    this.grantPublic = this.grantPublic.bind(this);\n    this.revokePublic = this.revokePublic.bind(this);\n    this.updateDatasetAcl = this.updateDatasetAcl.bind(this);\n    this.deleteAnno = this.deleteAnno.bind(this);\n    // this.changeContent = this.changeContent.bind(this);\n  }\n\n  deleteAnno(e) {\n    const parent = e.target.closest(\".rootAnno\");\n    const testReplyRetrieval = document.querySelectorAll(\".replyAnno\");\n\n    if (testReplyRetrieval) {\n      testReplyRetrieval.forEach((replyTargetAnno) => {\n        const replyTargetAnnoId = replyTargetAnno.dataset.replyAnnotationTarget;\n        const rootAnnoTargetId = parent.dataset.selfId;\n        if (replyTargetAnnoId === rootAnnoTargetId) {\n          console.log(\"replies found: \", replyTargetAnno.dataset.selfId);\n          auth\n            .fetch(replyTargetAnno.dataset.selfId, { method: \"DELETE\" })\n            .then(console.log(\"replies deleted\"));\n        }\n      });\n    }\n    auth\n      .fetch(this.props.annotation[\"@id\"], { method: \"DELETE\" })\n      .then(async (response) => {\n        const data = await response.json();\n        // check for error response\n        if (!response.ok) {\n          // get error message from body or default to response status\n          const error = (data && data.message) || response.status;\n          return Promise.reject(error);\n        }\n\n        this.setState({ resp: \"success\" });\n      })\n      .then(this.props.onRefreshClick())\n      .catch(() => {\n        console.warn(\"Your annotation has been deleted, refreshing...\");\n      });\n  }\n\n  showDetails = (e) => {\n    e.preventDefault();\n    e.stopPropagation();\n    const parent = e.target.closest(\".rootAnno\");\n    const details = parent.querySelector(\".hiddenDetails\");\n    if (details && this.state.isVisible === false) {\n      this.setState({ isVisible: true });\n      details.classList.remove(\"hiddenDetails\");\n      details.classList.add(\"showDetails\");\n    } else {\n      if (this.state.isVisible === true) {\n        this.setState({ isVisible: false });\n        const visibleDetails = parent.querySelector(\".showDetails\");\n        visibleDetails.classList.remove(\"showDetails\");\n        visibleDetails.classList.add(\"hiddenDetails\");\n      }\n    }\n  };\n\n  showReplyDetails = (e) => {\n    e.preventDefault();\n    e.stopPropagation();\n    const parent = e.target.closest(\".quoteContent\");\n    const details = parent.querySelector(\".hiddenDetails\");\n    if (details && this.state.isVisible === false) {\n      this.setState({ isVisible: true });\n      details.classList.remove(\"hiddenDetails\");\n      details.classList.add(\"showDetails\");\n    } else {\n      if (this.state.isVisible === true) {\n        this.setState({ isVisible: false });\n        const visibleDetails = parent.querySelector(\".showDetails\");\n        visibleDetails.classList.remove(\"showDetails\");\n        visibleDetails.classList.add(\"hiddenDetails\");\n      }\n    }\n  };\n  onClick = (e) => {\n    e.preventDefault();\n    e.stopPropagation();\n    const replyTarget = this.props.annotation.target;\n    const replyTargetId = this.props.annotation[\"@id\"];\n    this.props.onAnnoReplyHandler(replyTarget, replyTargetId);\n    console.log(\"reply target id\", replyTargetId);\n  };\n  componentDidMount() {\n    this.updateDatasetAcl();\n  }\n\n  showConfirm = (e) => {\n    e.preventDefault();\n    e.stopPropagation();\n    const parent = e.target.closest(\".rootAnno\");\n    const confirmScreen = parent.querySelector(\".hiddenConfirm\");\n    if (confirmScreen && this.state.isConfirmVisible === false) {\n      this.setState({ isConfirmVisible: !this.state.isConfirmVisible });\n      confirmScreen.classList.remove(\"hiddenConfirm\");\n      confirmScreen.classList.add(\"showConfirm\");\n    } else {\n      if (this.state.isConfirmVisible === true) {\n        this.setState({ isConfirmVisible: !this.state.isConfirmVisible });\n        const visibleConfirm = parent.querySelector(\".showConfirm\");\n        visibleConfirm.classList.remove(\"showConfirm\");\n        visibleConfirm.classList.add(\"hiddenConfirm\");\n      }\n    }\n  };\n\n  updateDatasetAcl() {\n    auth\n      .currentSession()\n      .then((s) => {\n        getSolidDatasetWithAcl(this.props.annotation[\"@id\"], {\n          fetch: auth.fetch,\n        })\n          .then((datasetWithAcl) => {\n            console.log(\"Got dataset: \", datasetWithAcl);\n            let resourceAcl;\n            if (!hasResourceAcl(datasetWithAcl)) {\n              if (!hasAccessibleAcl(datasetWithAcl)) {\n                console.warn(\n                  \"You do not have permission to modify access on \",\n                  this.props.annotation[\"@id\"]\n                );\n              }\n              if (!hasFallbackAcl(datasetWithAcl)) {\n                console.warn(\n                  \"You do not have permission to view access rights list on \",\n                  this.props.annotation[\"@id\"]\n                );\n              } else {\n                resourceAcl = createAclFromFallbackAcl(datasetWithAcl);\n                // ensure current user has control in the new ACL\n                const userControllableResourceAcl = setAgentResourceAccess(\n                  resourceAcl,\n                  s.webId,\n                  { read: true, append: true, write: true, control: true }\n                );\n                this.setState({\n                  userMayModifyAccess: true,\n                  datasetWithAcl,\n                  resourceAcl: userControllableResourceAcl,\n                  aclModified: Date.now(),\n                });\n                console.log(\"Creating ACL from fallback ACL\");\n              }\n            } else {\n              resourceAcl = getResourceAcl(datasetWithAcl);\n              this.setState({\n                userMayModifyAccess: true,\n                datasetWithAcl,\n                resourceAcl,\n                aclModified: Date.now(),\n              });\n              console.log(\"Got resource ACL\");\n            }\n          })\n          .catch((e) =>\n            console.error(\n              \"Couldn't get Solid dataset with ACL: \",\n              this.props.annotation[\"@id\"],\n              e\n            )\n          );\n      })\n      .catch((e) =>\n        console.error(\"Couldn't access the current Solid session: \", e)\n      );\n  }\n\n  shouldComponentUpdate(nextProps, nextState) {\n    if (this.state.aclModified !== nextState.aclModified) {\n      // user has enacted an ACL change. Request a re-render accordingly.\n      return true;\n    }\n    return false;\n  }\n\n  onPlayClick = (e) => {\n    e.preventDefault();\n    e.stopPropagation();\n    const bodyMedia = this.props.annotation.body[0].id;\n    this.props.onMediaClick(bodyMedia);\n  };\n\n  onPreviewclick = (e) => {\n    e.preventDefault();\n    e.stopPropagation();\n\n    const aimAt = e.target.closest(\".rootAnno\");\n    const _children = aimAt.children[0];\n\n    //const aimAt = rootAnno.contains(\"hiddenContainer\");\n    if (this.state.isPictureShowing === false) {\n      this.setState({\n        isPictureShowing: true,\n        previewButtonContent: \"Hide preview\",\n      });\n      console.log(_children);\n      document\n        .querySelector(\".hiddenContainer\")\n        .addEventListener(\"click\", function (e) {\n          e.stopPropagation();\n        });\n      _children.classList.remove(\"hiddenContainer\");\n      _children.classList.add(\"showContainer\");\n    } else {\n      document\n        .querySelector(\".showContainer\")\n        .addEventListener(\"click\", function (e) {\n          e.stopPropagation();\n        });\n      this.setState({\n        isPictureShowing: false,\n        previewButtonContent: \"show preview\",\n      });\n      _children.classList.add(\"hiddenContainer\");\n      _children.classList.remove(\"showContainer\");\n    }\n  };\n\n  onShowReplyClick = (e) => {\n    e.preventDefault();\n    e.stopPropagation();\n    const rootAnno = e.target.closest(\".rootAnno\");\n    console.log(\"root anno\", rootAnno);\n    const replyTargetAnnos = document.querySelectorAll(\".replyAnno\");\n    if (replyTargetAnnos.length) {\n      replyTargetAnnos.forEach((replyTargetAnno) => {\n        const replyTargetAnnoId = replyTargetAnno.dataset.replyAnnotationTarget;\n\n        const rootAnnoTargetId = rootAnno.dataset.selfId;\n\n        console.log(\"Reply target anno id: \", replyTargetAnnoId);\n        if (replyTargetAnnoId === rootAnnoTargetId) {\n          if (\n            this.props.areRepliesVisible === false ||\n            this.state.isClicked === false\n          ) {\n            this.setState({\n              isClicked: true,\n            });\n            rootAnno.appendChild(replyTargetAnno);\n            this.props.showReplyHandler();\n\n            //creates an array of all the visible replies\n            const noLongerShowing = Array.from(\n              rootAnno.getElementsByClassName(\"showReply\")\n            );\n            //hides them\n            noLongerShowing.forEach((noReplyShowing) =>\n              noReplyShowing.classList.add(\"hiddenReply\")\n            );\n            noLongerShowing.forEach((noReplyShowing) =>\n              noReplyShowing.classList.remove(\"showReply\")\n            );\n            //creates an array of the hidden annotations\n            const showing = Array.from(\n              rootAnno.getElementsByClassName(\"hiddenReply\")\n            );\n            //shows them\n            showing.forEach((showingReply) =>\n              showingReply.classList.add(\"showReply\")\n            );\n            showing.forEach((showingReply) =>\n              showingReply.classList.remove(\"hiddenReply\")\n            );\n          } else {\n            this.setState({\n              isClicked: false,\n            });\n            this.props.showReplyHandler();\n\n            const annoContainer = document.querySelector(\".listContainer\");\n            const noLongerShowing = Array.from(\n              rootAnno.getElementsByClassName(\"showReply\")\n            );\n            //hides them\n            noLongerShowing.forEach((noReplyShowing) => {\n              noReplyShowing.classList.add(\"hiddenReply\");\n              annoContainer.appendChild(noReplyShowing);\n            });\n            noLongerShowing.forEach((noReplyShowing) =>\n              noReplyShowing.classList.remove(\"showReply\")\n            );\n          }\n        }\n      });\n    } else console.warn(\"no replies to show for this annotation\");\n  };\n\n  grantPublic(e) {\n    e.preventDefault();\n    e.stopPropagation();\n    auth.currentSession().then((s) => {\n      let updatedAcl = setPublicResourceAccess(this.state.resourceAcl, {\n        read: true,\n        append: false,\n        write: false,\n        control: false,\n      });\n      // ensure current user has control in the new ACL\n      updatedAcl = setAgentResourceAccess(updatedAcl, s.webId, {\n        read: true,\n        append: true,\n        write: true,\n        control: true,\n      });\n      saveAclFor(this.state.datasetWithAcl, updatedAcl, { fetch: auth.fetch })\n        .then(() => this.updateDatasetAcl())\n        .catch((e) => console.error(\"Could not grant public access: \", e));\n    });\n  }\n\n  revokePublic(e) {\n    console.log(\"Revoking. Old acl: \", this.state.resourceAcl);\n    e.stopPropagation();\n    e.preventDefault();\n    auth.currentSession().then((s) => {\n      let updatedAcl = setPublicResourceAccess(this.state.resourceAcl, {\n        read: false,\n        append: false,\n        write: false,\n        control: false,\n      });\n      // ensure current user has control in the new ACL\n      updatedAcl = setAgentResourceAccess(updatedAcl, s.webId, {\n        read: true,\n        append: true,\n        write: true,\n        control: true,\n      });\n\n      saveAclFor(this.state.datasetWithAcl, updatedAcl, { fetch: auth.fetch })\n        .then(() => this.updateDatasetAcl())\n        .catch((e) => console.error(\"Could not revoke public access: \", e));\n    });\n  }\n\n  renderSwitch = () => {\n    const date = this.props.annotation.created;\n    let todaysDateISO = new Date().toISOString();\n    let creationDate = date.split(\"T\")[0];\n    let compareDate = String(todaysDateISO.split(\"T\")[0]);\n    let permission;\n    let modifyPermissionsElement;\n    let replies = document.querySelectorAll(\".replyAnno\");\n    const selfId = this.props.annotation[\"@id\"];\n    var areRepliesPresent = false;\n    /* cehck to see if any available replies are present, if not the toggle replies is hidden */\n    if (replies.length) {\n      replies.forEach((reply) => {\n        const target = reply.dataset.replyAnnotationTarget;\n        if (target === selfId) {\n          areRepliesPresent = true;\n        }\n      });\n    }\n\n    /* determine permission state of annotation in Solid Pod */\n    if (this.state.datasetWithAcl) {\n      if (getPublicAccess(this.state.datasetWithAcl).read)\n        permission = \"public\";\n      else if (Object.keys(getAgentAccessAll(this.state.datasetWithAcl)) > 1)\n        /* declare it as shared if it has any access info for more than one (assumed to be user)\n         * TODO check assumptions...\n         */\n        permission = \"shared\";\n      else permission = \"private\";\n    } else {\n      permission = \"unknown\";\n    }\n    // Logic to toggle public access on and off\n    // TODO allow sharing with individual agents using setAgentResourceAccess\n    if (!this.state.userMayModifyAccess) {\n      modifyPermissionsElement = (\n        <span className=\"accessPermissions\">No access</span>\n      );\n    } else {\n      if (permission !== \"public\") {\n        modifyPermissionsElement = (\n          <Toggle\n            checked={false}\n            onChange={this.grantPublic}\n            icons={{\n              unchecked: (\n                <svg\n                  aria-hidden=\"true\"\n                  focusable=\"false\"\n                  data-prefix=\"fas\"\n                  data-icon=\"lock\"\n                  className=\"svg-inline--fa fa-lock fa-w-14\"\n                  role=\"img\"\n                  xmlns=\"http://www.w3.org/2000/svg\"\n                  viewBox=\"0 0 576 512\"\n                  vertical-align=\"middle\"\n                >\n                  <path\n                    fill=\"white\"\n                    d=\"M400 224h-24v-72C376 68.2 307.8 0 224 0S72 68.2 72 152v72H48c-26.5 0-48 21.5-48 48v192c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V272c0-26.5-21.5-48-48-48zm-104 0H152v-72c0-39.7 32.3-72 72-72s72 32.3 72 72v72z\"\n                  ></path>\n                </svg>\n              ),\n            }}\n          />\n        );\n      } else if (permission === \"public\") {\n        modifyPermissionsElement = (\n          <Toggle\n            checked={true}\n            onChange={this.revokePublic}\n            icons={{\n              checked: (\n                <svg\n                  aria-hidden=\"true\"\n                  focusable=\"false\"\n                  data-prefix=\"fas\"\n                  data-icon=\"lock-open\"\n                  className=\"svg-inline--fa fa-lock-open fa-w-18\"\n                  role=\"img\"\n                  xmlns=\"http://www.w3.org/2000/svg\"\n                  viewBox=\"0 0 576 512\"\n                >\n                  <path\n                    fill=\"white\"\n                    d=\"M423.5 0C339.5.3 272 69.5 272 153.5V224H48c-26.5 0-48 21.5-48 48v192c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V272c0-26.5-21.5-48-48-48h-48v-71.1c0-39.6 31.7-72.5 71.3-72.9 40-.4 72.7 32.1 72.7 72v80c0 13.3 10.7 24 24 24h32c13.3 0 24-10.7 24-24v-80C576 68 507.5-.3 423.5 0z\"\n                  ></path>\n                </svg>\n              ),\n            }}\n          />\n        );\n      }\n    }\n    /* shared components for all the annotations */\n    let commonAnnoComponents = (\n      <div>\n        <div className=\"hiddenConfirm\">\n          <div>\n            Delete this annotation and its replies?\n            <p>\n              <button className={\"deleteYes\"} onClick={this.deleteAnno}>\n                yes\n              </button>\n              <button className={\"deleteNo\"} onClick={this.showConfirm}>\n                no\n              </button>\n            </p>\n          </div>\n        </div>\n        <div style={{ paddingTop: \"1.5%\" }}>\n          {compareDate === creationDate && (\n            <button className=\"deleteButton\" onClick={this.showConfirm}>\n              <svg\n                aria-hidden=\"true\"\n                focusable=\"false\"\n                data-prefix=\"fas\"\n                data-icon=\"trash\"\n                className=\"svg-inline--fa fa-trash fa-w-14\"\n                role=\"img\"\n                xmlns=\"http://www.w3.org/2000/svg\"\n                viewBox=\"0 0 448 512\"\n                width=\"100%\"\n                height=\"100%\"\n              >\n                <path\n                  fill=\"grey\"\n                  d=\"M432 32H312l-9.4-18.7A24 24 0 0 0 281.1 0H166.8a23.72 23.72 0 0 0-21.4 13.3L136 32H16A16 16 0 0 0 0 48v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16V48a16 16 0 0 0-16-16zM53.2 467a48 48 0 0 0 47.9 45h245.8a48 48 0 0 0 47.9-45L416 128H32z\"\n                ></path>\n              </svg>\n            </button>\n          )}\n          <button\n            className=\"infoButton\"\n            onMouseEnter={this.showDetails}\n            onMouseLeave={this.showDetails}\n          >\n            <svg\n              aria-hidden=\"true\"\n              focusable=\"false\"\n              data-prefix=\"far\"\n              data-icon=\"info-circle\"\n              className=\"svg-inline--fa fa-info-circle fa-w-16\"\n              role=\"img\"\n              xmlns=\"http://www.w3.org/2000/svg\"\n              viewBox=\"0 0 512 512\"\n              width=\"100%\"\n              height=\"100%\"\n            >\n              <path\n                fill=\"grey\"\n                d=\"M256 8C119.043 8 8 119.083 8 256c0 136.997 111.043 248 248 248s248-111.003 248-248C504 119.083 392.957 8 256 8zm0 448c-110.532 0-200-89.431-200-200 0-110.495 89.472-200 200-200 110.491 0 200 89.471 200 200 0 110.53-89.431 200-200 200zm0-338c23.196 0 42 18.804 42 42s-18.804 42-42 42-42-18.804-42-42 18.804-42 42-42zm56 254c0 6.627-5.373 12-12 12h-88c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h12v-64h-12c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h64c6.627 0 12 5.373 12 12v100h12c6.627 0 12 5.373 12 12v24z\"\n              ></path>\n            </svg>\n          </button>\n          permissions: {modifyPermissionsElement}\n        </div>\n      </div>\n    );\n    /* cluster of buttons and stuff in the \"annotation footer\" */\n    let replyButtonsCluster = (\n      <div>\n        <div className=\"hiddenDetails\">\n          {\" \"}\n          <p className=\"date\">\n            Created on: {date}, access permissions: {permission}.\n          </p>\n        </div>\n        <div>\n          {areRepliesPresent === true && (\n            <button\n              className=\"showRepliesButton\"\n              name=\"showRepliesButton\"\n              onClick={this.onShowReplyClick}\n            >\n              {this.state.showRepliesButtonContent}\n            </button>\n          )}\n          <button\n            className=\"replyButton\"\n            name=\"replyButton\"\n            onClick={this.onClick}\n          >\n            Reply\n          </button>\n        </div>\n      </div>\n    );\n\n    //stuff that i am carrying around: the annotation's ID you are replying to, the body (currently sits under annotation.source) and the annotation's specific ID\n    const motivation = this.props.annotation.motivation;\n    const bodyD = this.props.annotation.body[0].value;\n    const bodyL = this.props.annotation.body[0].id;\n    const bodyMedia = this.props.annotation.body[0].id;\n    const target = this.props.annotation.target[0].id;\n    const repTarget = this.props.annotation.target;\n    const creator = this.props.annotation.creator || \"unknown\";\n\n    switch (motivation) {\n      case \"describing\":\n        return (\n          <div\n            className=\"rootAnno annoItem\"\n            data-target={target}\n            data-self-id={selfId}\n          >\n            {\" \"}\n            {commonAnnoComponents}\n            <p>{bodyD}</p>\n            {replyButtonsCluster}\n          </div>\n        );\n      case \"linking\":\n        if (bodyL.startsWith(\"http\")) {\n          return (\n            <div\n              className=\"rootAnno annoItem\"\n              data-target={target}\n              data-self-id={selfId}\n            >\n              <p>\n                {\"\"}\n                {commonAnnoComponents}\n                {\n                  <a\n                    href={bodyL}\n                    onClick=\"return false;\"\n                    target=\"_blank\"\n                    rel=\"noopener noreferrer\"\n                  >\n                    {bodyL}\n                  </a>\n                }\n              </p>\n              {replyButtonsCluster}\n            </div>\n          );\n        } else {\n          const appendURL = \"https://\" + bodyL;\n          return (\n            <div\n              className=\"rootAnno annoItem\"\n              data-target={target}\n              data-self-id={selfId}\n            >\n              {commonAnnoComponents}\n              <p>\n                {\"\"}\n                {\n                  <a\n                    href={appendURL}\n                    onClick=\"return false;\"\n                    target=\"_blank\"\n                    rel=\"noopener noreferrer\"\n                  >\n                    {bodyL}\n                  </a>\n                }\n              </p>\n              {replyButtonsCluster}\n            </div>\n          );\n        }\n\n      case \"trompa:cueMedia\":\n        const cleanMediaString = bodyMedia.split(\"#\")[0];\n        return (\n          <div\n            className=\"rootAnno annoItem\"\n            data-target={target}\n            data-self-id={selfId}\n          >\n            {\" \"}\n            {commonAnnoComponents}\n            <p>\n              {cleanMediaString}{\" \"}\n              <button className=\"playButton\" onClick={this.onPlayClick}>\n                {\" \"}\n                <img\n                  src={PlayLogo}\n                  alt=\"\"\n                  style={{\n                    width: \"5px\",\n                    alignContent: \"center\",\n                    textAlign: \"center\",\n                  }}\n                ></img>{\" \"}\n                play{\" \"}\n              </button>\n            </p>\n            {replyButtonsCluster}\n          </div>\n        );\n      case \"trompa:cueImage\":\n        return (\n          <div\n            className=\"rootAnno annoItem\"\n            data-target={target}\n            data-self-id={selfId}\n          >\n            {\" \"}\n            <div className=\"hiddenContainer\">\n              <a href={bodyMedia} target=\"_blank\" rel=\"noopener noreferrer\">\n                <img\n                  title=\"click for full res\"\n                  src={bodyMedia}\n                  alt=\"annotation\"\n                  style={{\n                    maxWidth: \"240px\",\n                    maxHeight: \"135px\",\n                    marginTop: \"5px\",\n                  }}\n                />\n              </a>\n            </div>\n            {commonAnnoComponents}\n            <p>\n              The content of this annotation is a picture, click the button to\n              see a preview{\" \"}\n              <button onClick={this.onPreviewclick}>\n                {this.state.previewButtonContent}{\" \"}\n              </button>\n            </p>\n            {replyButtonsCluster}\n          </div>\n        );\n      case \"trompa:playlist\":\n        return;\n\n      case \"replying\":\n        return (\n          <div\n            data-reply-annotation-target={repTarget}\n            data-self-id={selfId}\n            className=\"replyAnno hiddenReply\"\n          >\n            <div className=\"quoteContent\">\n              <button className=\"deleteButton\" onClick={this.deleteAnno}>\n                <svg\n                  aria-hidden=\"true\"\n                  focusable=\"false\"\n                  data-prefix=\"fas\"\n                  data-icon=\"trash\"\n                  className=\"svg-inline--fa fa-trash fa-w-14\"\n                  role=\"img\"\n                  xmlns=\"http://www.w3.org/2000/svg\"\n                  viewBox=\"0 0 448 512\"\n                  width=\"100%\"\n                  height=\"100%\"\n                >\n                  <path\n                    fill=\"grey\"\n                    d=\"M432 32H312l-9.4-18.7A24 24 0 0 0 281.1 0H166.8a23.72 23.72 0 0 0-21.4 13.3L136 32H16A16 16 0 0 0 0 48v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16V48a16 16 0 0 0-16-16zM53.2 467a48 48 0 0 0 47.9 45h245.8a48 48 0 0 0 47.9-45L416 128H32z\"\n                  ></path>\n                </svg>\n              </button>\n              <button\n                className=\"infoButton\"\n                onMouseEnter={this.showReplyDetails}\n                onMouseLeave={this.showReplyDetails}\n              >\n                <svg\n                  aria-hidden=\"true\"\n                  focusable=\"false\"\n                  data-prefix=\"far\"\n                  data-icon=\"info-circle\"\n                  className=\"svg-inline--fa fa-info-circle fa-w-16\"\n                  role=\"img\"\n                  xmlns=\"http://www.w3.org/2000/svg\"\n                  viewBox=\"0 0 512 512\"\n                  width=\"100%\"\n                  height=\"100%\"\n                >\n                  <path\n                    fill=\"grey\"\n                    d=\"M256 8C119.043 8 8 119.083 8 256c0 136.997 111.043 248 248 248s248-111.003 248-248C504 119.083 392.957 8 256 8zm0 448c-110.532 0-200-89.431-200-200 0-110.495 89.472-200 200-200 110.491 0 200 89.471 200 200 0 110.53-89.431 200-200 200zm0-338c23.196 0 42 18.804 42 42s-18.804 42-42 42-42-18.804-42-42 18.804-42 42-42zm56 254c0 6.627-5.373 12-12 12h-88c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h12v-64h-12c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h64c6.627 0 12 5.373 12 12v100h12c6.627 0 12 5.373 12 12v24z\"\n                  ></path>\n                </svg>\n              </button>\n              <p>Reply: {bodyD}</p>\n              <span className=\"hiddenDetails\">\n                {\" \"}\n                <span className=\"date\">\n                  Created on: {date}, access permissions: {permission}.\n                </span>\n              </span>\n            </div>\n          </div>\n        );\n\n      default:\n        console.log(\n          \"no motivation provided defaulting to plain text annotation\",\n          motivation\n        );\n        return (\n          <div className=\"annoItem\" data-target={target}>\n            {\" \"}\n            <p>The plain text content of this annotation is {bodyD}</p>\n            <div className=\"date\">\n              Created on: {date} by {creator} with {motivation} motivation\n            </div>\n          </div>\n        );\n    }\n  };\n\n  render() {\n    return <div className=\"annoItemContainer\">{this.renderSwitch()}</div>;\n  }\n}\n\nexport default AnnotationItem;\n","/* annotationList is the annotationItem container. Filters the annotations in order to render only the one associated to the specific measure selected */\n/* they are ordered chronologically with sortedfilteredAnno and the onClick funciton is attacehd to the annotation item's body to highlight the annotated section of the score*/\n\nimport React from \"react\";\nimport AnnotationItem from \"./annotationItem\";\n//import PropTypes from \"prop-types\";\nexport class AnnotationList extends React.Component {\n  state = {\n    order: \"desc\",\n  };\n\n  render() {\n    const { order } = this.state;\n    const filtering = this.props.allEntries.filter((anno) =>\n      this.props.filteringEntries.includes(anno[\"@id\"])\n    );\n    const sortedFilteredAnno = filtering.sort((a, b) => {\n      const isReverse = order === \"asc\" ? 1 : -1;\n      return isReverse * a.created.localeCompare(b.created);\n    });\n\n    function onClick(e) {\n      // e.preventDefault();\n      // e.stopPropagation();\n      console.log(\"i am being clicked\");\n      // figure out this element's focus Id\n      const focusId = Array.from(e.currentTarget.classList).filter((c) =>\n        c.startsWith(\"focus-\")\n      );\n      if (focusId.length > 1) {\n        console.warn(\"Element with multiple focus Ids!\", e.target);\n      }\n      // remove focus off previous inFocus elements (now outdated)\n      const noLongerInFocusList = Array.from(\n        document.getElementsByClassName(\"inFocus\")\n      );\n      noLongerInFocusList.forEach((noFocusElement) =>\n        noFocusElement.classList.remove(\"inFocus\")\n      );\n      // add focus to newly inFocus elements\n      const inFocusList = Array.from(\n        document.getElementsByClassName(focusId[0])\n      );\n      inFocusList.forEach((focusElement) =>\n        focusElement.classList.add(\"inFocus\")\n      );\n      // scroll page to highlighted item\n      // document\n      //   .querySelector(\".inFocus\")\n      //   .scrollIntoView({ behavior: \"smooth\" });\n    }\n\n    return (\n      <div className=\"listContainer\" id=\"listContainer\">\n        {sortedFilteredAnno.map((item) => {\n          const annoIdFragment = item[\"@id\"].substr(\n            item[\"@id\"].lastIndexOf(\"/\") + 1\n          );\n          return (\n            <div\n              className={\"focus-\" + annoIdFragment}\n              onClick={onClick}\n              key={item[\"@id\"]}\n              id={annoIdFragment}\n            >\n              <AnnotationItem\n                annotation={item}\n                onAnnoReplyHandler={this.props.onAnnoReplyHandler}\n                onMediaClick={this.props.onMediaClick}\n                replyAnnotationTarget={this.props.replyAnnotationTarget}\n                showReplyHandler={this.props.showReplyHandler}\n                areRepliesVisible={this.props.areRepliesVisible}\n                onRefreshClick={this.props.onRefreshClick}\n              />\n            </div>\n          );\n        })}\n      </div>\n    );\n  }\n}\n\n// AnnotationList.propTypes = {\n//   entries: PropTypes.array.isRequired,\n// };\n\nexport default AnnotationList;\n","import React from \"react\";\nimport auth from \"solid-auth-client\";\nclass PlaylistItem extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      resp: \"\",\n    };\n    this.delete = this.delete.bind(this);\n  }\n  delete() {\n    auth\n      .fetch(this.props.annotation[\"@id\"], { method: \"DELETE\" })\n      .then(async (response) => {\n        const data = await response.json();\n        // check for error response\n        if (!response.ok) {\n          // get error message from body or default to response status\n          const error = (data && data.message) || response.status;\n          return Promise.reject(error);\n        }\n\n        this.setState({ resp: \"success\" });\n      })\n      .then(this.props.onRefreshClick())\n      .catch(() => {\n        console.warn(\"Your annotation has been deleted, refreshing...\");\n      });\n  }\n\n  render() {\n    const selfId = this.props.annotation[\"@id\"];\n    const title = this.props.annotation.body[0].seconds;\n    const link = this.props.annotation.body[0].value;\n\n    return (\n      <div className=\"rootAnno playlistItem\">\n        <p>{title}</p>\n        <iframe\n          src={link}\n          title={selfId}\n          frameBorder=\"0\"\n          width=\"400\"\n          height=\"60\"\n        />\n        <button onClick={this.delete}>del</button>\n      </div>\n    );\n  }\n}\n\nexport default PlaylistItem;\n","import React from \"react\";\nimport PlaylistItem from \"./playlistItem\";\nclass renditionsPlaylist extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      visible: false,\n    };\n    this.onClick = this.onClick.bind(this);\n  }\n\n  onClick() {\n    let target = document.querySelector(\".playlist\");\n    if (this.state.visible === false) {\n      this.setState({ visible: !this.state.visible });\n      target.classList.remove(\"hidden\");\n    } else {\n      if (this.state.visible === true) {\n        target.classList.add(\"hidden\");\n        this.setState({ visible: !this.state.visible });\n      }\n    }\n  }\n  render() {\n    return (\n      <div>\n        <button className=\"renditionButton\" onClick={this.onClick}>\n          Show recordings playlist\n        </button>\n        <div className=\"playlist hidden\">\n          {this.props.allEntries.map((anno) => {\n            const motivation = anno.motivation;\n            return (\n              motivation === \"trompa:playlist\" && (\n                <div key={anno[\"@id\"]}>\n                  <PlaylistItem\n                    annotation={anno}\n                    onRefreshClick={this.props.onRefreshClick}\n                  />\n                </div>\n              )\n            );\n          })}\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default renditionsPlaylist;\n","import React, {Component} from \"react\";\nimport Modal from \"react-modal\";\nimport PropTypes from 'prop-types';\n\nexport default class HelpModal extends Component {\n    render = () => {\n        return <Modal\n            isOpen={this.props.isOpen}\n            onRequestClose={this.props.onRequestClose}\n            contentLabel=\"my modal\"\n            className=\"mymodal\"\n            overlayClassName=\"myoverlay\"\n            ariaHideApp={false}\n        >\n            <div>\n                <header className=\"modal-header\">\n                    <h1 className=\"modal-title\">Help section</h1>\n                </header>\n                <div className=\"modal-body\">\n                    <h3>\n                        Below you can find some tips on how to use the annotation tool:\n                    </h3>\n                    <br />\n                    <div style={{ height: 500, overflow: \"auto\" }}>\n                        <h4>How do I create an annotation?</h4>\n                        <ol>\n                            <li>Select the type of selection you want to use (note, measure, directives etc)</li>\n                            <li>Drag across the score in order to select the elements\n                                you want to annotate</li>\n                            <li>You can select discontinuous measures by holding the\n                                shift key</li>\n                            <li>Sometimes slurs can get in the way of your selection,\n                            you can deselect unwanted measures by holding the shift key and\n                                clicking on the measure you wish to deselect</li>\n                            <li>Select the type of annotation you wish to submit\n                                (description, link etc)</li>\n                            <li>Type the text or paste the URL you wish to attach to the\n                                annotation</li>\n                            <li>Click the green submit button</li>\n                        </ol>\n                        <h4>I made a mistake in my annotation, how can I delete it?</h4>\n                        <ul><li>You can delete you annotation by clicking the rubbish bin icon\n                            in the annotation item and click yes to delete it</li></ul>\n\n                        <h4>\n                            I have replied to an annotation but I can’t see my reply, where\n                            is it?\n                        </h4>\n                        <ul><li>You can see all the replies to the specific annotation by\n                            clicking the “show replies button” in the annotation you are\n                            replying to</li></ul>\n                        <h4>\n                            Can I create a different type of reply (media or image content)?\n                        </h4>\n                        <ul><li>Not right now, this feature will be released in a future\n                            version of the software</li></ul>\n                        <h4>\n                            How does the solid pod system work, is my data really safe?\n                        </h4>\n                        <ul><li>Solid was purposely built for data safety and protection, and\n                            by design everything contained in the pod is private unless\n                            specified. For more information visit the{\" \"}\n                            <a\n                                href=\"https://solidproject.org/\"\n                                target=\"_blank\"\n                                rel=\"noopener noreferrer\"\n                            >\n                                solid project\n                            </a>{\" \"}\n                        page for more info</li></ul>\n                        <h4>I have found a bug, what can i do?</h4>\n                        <ul><li>Please submit a bug report to{\" \"}\n                            <a href=\"mailto:fzuba002@gold.ac.uk?subject=Bug report\">\n                                fzuba002@gold.ac.uk\n                            </a>{\" \"}\n                            describing the nature of the bug and how to reproduce it, make\n                            sure to include browser model and operating system used. Thanks!\n                            :)\n                        </li></ul>\n                    </div>\n                </div>\n                <footer className=\"modal-footer\">\n                    <button onClick={this.props.onRequestClose}>close</button>\n                </footer>\n            </div>\n        </Modal>\n    }\n}\n\nHelpModal.propTypes = {\n    isOpen: PropTypes.bool,\n    onRequestClose: PropTypes.func\n}","import React, {Component} from \"react\";\nimport PropTypes from \"prop-types\";\nimport {useQuery} from \"@apollo/client\";\nimport {gql} from \"@apollo/client/core\";\n\nconst EARLY_MUSIC_WORKS = gql`\nquery earlyMusicWorks($query: String!) {\n  ItemList(identifier:\"e91489d7-a776-40dd-8abf-0c934922bd99\") {\n    identifier\n    name\n    itemListElement(filter:{name_regexp:$query}) {\n      __typename\n      ... on MusicComposition {\n        identifier\n        contributor\n        name\n        source\n        composer {\n          name\n        }\n        workExample(filter: {encodingFormat:\"application/mei+xml\"}) {\n          ... on MediaObject {\n            identifier\n            source\n            contentUrl\n            encodingFormat\n          }\n        }\n      }\n    }\n  }\n}\n`;\n\nfunction SearchResults(props) {\n\n    const query = `(?i).*${props.query}.*`\n    const { loading, error, data } = useQuery(EARLY_MUSIC_WORKS, {variables: {query: query}});\n\n    if (loading) return <p>Loading...</p>;\n    if (error) return <p>Error :(</p>;\n\n    console.debug(data)\n\n    const works = data.ItemList;\n    if (!works || !works.length) {\n        return <div/>\n    }\n    console.debug(works)\n    const compositions = works[0].itemListElement;\n    if (!compositions || !compositions.length) {\n        return <div/>\n    }\n    console.debug(compositions)\n    return (\n        <div>\n            <p>Results:</p>\n            <ul>\n                {compositions.map(function(item) {\n                    const id = item.identifier\n                    const title = item.name;\n                    const contributor = item.contributor;\n                    const composer = item.composer[0].name;\n                    const workExample = item.workExample;\n                    if (workExample && workExample.length) {\n                        return <li key={id}>\n                            <a href={workExample[0].source} onClick={props.onSelect}>{composer} - {title} (from {contributor})</a>\n                        </li>\n                    } else {\n                        return \"\"\n                    }\n                })}\n            </ul>\n        </div>\n    )\n}\n\nSearchResults.props = {\n    query: PropTypes.string,\n    onSelect: PropTypes.func\n}\n\nexport default class FileSelector extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            // default file to load\n            defaultValue: this.props.defaultUrl,\n            // react controlled component for url field\n            fieldValue: '',\n            // react controlled component for search field\n            searchValue: '',\n            showResults: false,\n            searchResults: {}\n        }\n    }\n\n    handleChange = event => {\n        this.setState({fieldValue: event.target.value});\n    }\n\n    handleSearchChange = event => {\n        this.setState({searchValue: event.target.value});\n    }\n\n    handleSubmit = event => {\n        event.preventDefault();\n        this.props.onSelect(this.state.fieldValue || this.state.defaultValue);\n    }\n\n    handleSearch = event => {\n        event.preventDefault();\n        this.setState({showResults: true})\n    }\n\n    handleSearchResultSelection = event => {\n        event.preventDefault();\n        this.props.onSelect(event.target.attributes.href.value);\n    }\n\n    render() {\n        return (\n            <div>\n                <p>Select your MEI file:</p>\n                <form onSubmit={this.handleSubmit}>\n                <input\n                    type=\"text\"\n                    onChange={this.handleChange}\n                    value={this.state.fieldValue}\n                    placeholder={this.props.placeholder}\n                    className=\"sizedTextBox\"\n                />\n\n                <input\n                    title=\"click to render the linked MEI file\"\n                    className=\"MEIButton\"\n                    type=\"submit\"\n                    value=\"render\"\n                />\n                </form>\n                <p>Or search for an item from the TROMPA database</p>\n                <form onSubmit={this.handleSearch}>\n                    <input\n                        type=\"text\"\n                        onChange={this.handleSearchChange}\n                        value={this.state.searchValue}\n                        placeholder=\"search for a work name\"\n                        className=\"sizedTextBox\"\n                    />\n\n                    <input\n                        title=\"search for a work name\"\n                        className=\"MEIButton\"\n                        type=\"submit\"\n                        value=\"search\"\n                    />\n                </form>\n                {this.state.showResults &&\n                    <SearchResults query={this.state.searchValue} onSelect={this.handleSearchResultSelection}/>\n                }\n\n            </div>\n        );\n    }\n}\n\nFileSelector.propTypes = {\n    defaultUrl: PropTypes.string,\n    placeholder: PropTypes.string,\n    onSelect: PropTypes.func\n}","export function parseMusicXml(document) {\n    const parts = document.getElementsByTagName(\"part\")\n    return Array.from(parts).map(function(part) {\n        let part_notes = []\n        Array.from(part.getElementsByTagName(\"note\")).forEach(function(note) {\n            const pitch = note.getElementsByTagName(\"pitch\");\n            if (pitch.length) {\n                const step = pitch[0].getElementsByTagName(\"step\");\n                const octave = pitch[0].getElementsByTagName(\"octave\");\n                if (step.length && octave.length) {\n                    part_notes.push({pitch: step[0].innerHTML, oct: parseInt(octave[0].innerHTML)})\n                }\n            }\n        })\n        return part_notes;\n    }).map(pitchesToIntervalMapping)\n}\n\nexport function parseMei(document) {\n    const staffDefinitions = document.getElementsByTagName(\"staffDef\");\n    const staffs = {}\n    Array.from(staffDefinitions).forEach(function(sd) {\n        const attributes = sd.attributes\n        const label = sd.getElementsByTagName(\"label\");\n        let staffLabel;\n        if (label.length) {\n            staffLabel = label[0].innerHTML;\n        }\n        if (attributes.n) {\n            staffs[attributes.n.value] = {label: staffLabel, notes: []};\n        }\n    })\n\n    const measures = document.getElementsByTagName(\"measure\")\n    Array.from(measures).forEach(function(measure) {\n        const measureStaffs = measure.getElementsByTagName(\"staff\");\n        Array.from(measureStaffs).forEach(function(staff) {\n            const measureStaffId = staff.attributes.n.value\n            const notes = staff.getElementsByTagName(\"note\")\n            Array.from(notes).forEach(function(note) {\n                const nattrs = note.attributes;\n                staffs[measureStaffId].notes.push({pitch: nattrs.pname.value, oct: parseInt(nattrs.oct.value)})\n            })\n        })\n    })\n    Object.keys(staffs).forEach(function(i) {\n        staffs[i].notes = pitchesToIntervalMapping(staffs[i].notes)\n    })\n    return staffs\n\n}\n\n\n/**\n * Take an array of pitches (objects with key pitch (letter) and oct (number))\n * and return a mapping of absolute pitches differences between the notes\n * - if there is no change\n * a for pitch 1, b for pitch 2, c for pitch 3. Upper-case if pitch is increasing,\n * lower-case if pitch is decreasing. Doesn't take in to account accidentals\n * @param pitches\n */\nfunction pitchesToIntervalMapping(pitches) {\n    const interval_mapping = '-abcdefghijklmnopqrstuvwxyz'.split('');\n\n    const alphabet = ['A', 'B', 'C', 'D', 'E', 'F', 'G']\n\n    const pitch_nums = pitches.map(function(e) {\n        // TODO: This replicates the behaviour of the awk script, where g is 0 and a->f is 1-6\n        //  appears to be a bug because of awk string indexes starting from 1\n        return (alphabet.indexOf(e.pitch.toUpperCase())+1)%7 + ((7 * e.oct) % 7)\n    });\n\n    let pitch_intervals = []\n    // Finish one before the end, because we're looking at the gaps\n    for (let i = 0; i < pitch_nums.length - 1; i++) {\n        pitch_intervals.push(pitch_nums[i+1] - pitch_nums[i])\n    }\n    return pitch_intervals.map(function(i) {\n        // Clamp to a maximum interval of 25 notes\n        if (i < -26) i = -26;\n        if (i > 26) i = 26\n        let letter = interval_mapping[Math.abs(i)]\n        if (i > 0) {\n            letter = letter.toUpperCase();\n        }\n        return letter\n    }).join('')\n}\n","import React, {Component} from \"react\";\nimport PropTypes from \"prop-types\";\nimport {parseMei} from \"../search/SearchQuery\";\nimport {\n    Accordion,\n    AccordionItem,\n    AccordionItemButton,\n    AccordionItemHeading,\n    AccordionItemPanel\n} from \"react-accessible-accordion\";\n\n\nexport default class FtempoSearch extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            searchReady: false,\n            selectedOption: null,\n            meiVoiceQueryStrings: {},\n        }\n    }\n\n    componentDidUpdate(prevProps, prevState, snapshot) {\n        if (this.props.counter !== prevProps.counter) {\n            const mei = this.props.vrvToolkit.getMEI();\n            const meiDoc = new DOMParser().parseFromString(mei, \"text/xml\");\n            console.debug(meiDoc)\n            // TODO: not working?\n            if (meiDoc.documentElement.nodeName === \"parsererror\") {\n                return \"\"\n            }\n            this.setState({meiVoiceQueryStrings: parseMei(meiDoc)})\n        }\n    }\n\n    buttonPressed = (event) => {\n        event.preventDefault();\n        this.setState({searchReady: true});\n        this.props.onButtonPress(event);\n    }\n\n    onValueChange = (event) => {\n        this.setState({\n            selectedOption: event.target.value\n        });\n    }\n\n    doSearch = () => {\n        const selectedVoice = this.state.meiVoiceQueryStrings[this.state.selectedOption];\n        if (selectedVoice && selectedVoice.notes) {\n            const query = {codestring: selectedVoice.notes}\n            fetch('https://porter.net.nz/ftempo/api/query', {\n                method: 'POST',\n                headers: {\n                    'Content-Type': 'application/json',\n                },\n                body: JSON.stringify(query),\n            }).then(response => response.json()).then(data => {\n                this.setState({searchResults: data})\n            })\n        }\n    }\n\n    render() {\n        return (\n            <div>\n                <h3>Search using FTempo</h3>\n                {!this.state.searchReady && <button onClick={this.buttonPressed}>Show search options</button>}\n                {this.state.searchReady && this.state.meiVoiceQueryStrings &&\n                <><p>Search this score on FTempo, either a single voice or all voices</p>\n                <ul>\n                    {Object.keys(this.state.meiVoiceQueryStrings).map((e) => {\n                        return <li key={e}>\n                            <label><input type=\"radio\" name=\"voice\" value={e} id={\"voice-\" + e} checked={this.state.selectedOption === e} onChange={this.onValueChange}/>\n                                {this.state.meiVoiceQueryStrings[e].label}</label></li>\n                    })\n                    }\n                    {/*<li><label><input type=\"radio\" name=\"voice\" value=\"all\" checked={this.state.selectedOption === \"all\"} onChange={this.onValueChange} />All voices</label></li>*/}\n                </ul>\n                    <button onClick={this.doSearch} disabled={!this.state.selectedOption}>Search</button>\n                </>\n                }\n                {this.state.searchResults &&\n                <Accordion allowZeroExpanded>\n                    {this.state.searchResults.map((i) => {\n                        return <AccordionItem key={i.id}>\n                            <AccordionItemHeading>\n                                <AccordionItemButton>{i.id}</AccordionItemButton>\n                            </AccordionItemHeading>\n                            <AccordionItemPanel>\n                                <img src={\"https://porter.net.nz/ftempo/img/jpg/\" + i.id + \".jpg\"}/>\n                            </AccordionItemPanel>\n                        </AccordionItem>\n                })}\n                </Accordion>\n                }\n            </div>\n        )\n    }\n}\n\nFtempoSearch.propTypes = {\n    onButtonPress: PropTypes.func,\n    vrvToolkit: PropTypes.any,\n    counter: PropTypes.number\n}","import React, { Component } from \"react\";\nimport SelectableScore from \"selectable-score/lib/selectable-score\";\nimport NextPageButton from \"selectable-score/lib/next-page-button.js\";\nimport PrevPageButton from \"selectable-score/lib/prev-page-button.js\";\nimport AnnotationSubmitter from \"../annotations/annotationSubmitter.js\";\nimport SelectionHandler from \"../annotations/selectionHandler.js\";\nimport AnnotationList from \"../annotations/annotationList.js\";\nimport ReactPlayer from \"react-player\";\nimport RenditionsPlaylist from \"../annotations/renditionsPlaylist.js\";\n\nimport ArrowToLeft from \"../graphics/arrow-to-left-regular.svg\";\nimport ArrowToRight from \"../graphics/arrow-to-right-regular.svg\";\nimport SearchMinus from \"../graphics/search-minus-solid.svg\";\nimport SearchPlus from \"../graphics/search-plus-solid.svg\";\nimport HelpModal from \"./HelpModal\";\nimport FileSelector from \"./FileSelector\";\nimport { bindActionCreators } from \"redux\";\nimport { connect } from \"react-redux\";\nimport FtempoSearch from \"./FtempoSearch\";\n\n//Modal.setAppElement(\"root\");\n//\n//const vAdjust = 26; // num. pixels to nudge down anno measureBoxes+\nconst defaultVerovioScale = 50;\n\nlet viewPortHeight = window.outerHeight;\nlet viewPortWidth = window.outerWidth;\n// prettier-ignore\nconst defaultVerovioHeight = (viewPortHeight < 1439) ? 2000 : 2500;\n// prettier-ignore\nconst defaultVerovioWidth = (viewPortWidth > 1925) ? 2800 : 2000;\n\n// Selector to say if we're showing the annotation interface or F-tempo search\nconst ApplicationMode = Object.freeze({\n  Annotate: 'Annotate',\n  Search: 'Search'\n});\n\n// height /= scale / 100;\n// width /= scale / 100;\n\nclass SelectableScoreApp extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      annoValue: \"\",\n      selection: [],\n      annotationType: \"describing\",\n      placeholder: \"Add your annotation...\",\n      uri:\n        \"https://raw.githubusercontent.com/trompamusic-encodings/Mahler_Symphony_No4_Doblinger-4hands/master/Mahler_No4_1-Doblinger-4hands.mei\",\n      selectorString: \"\",\n      buttonContent: \"Submit to your Solid POD\",\n      replyAnnotationTarget: [],\n      currentAnnotation: [],\n      toggleAnnotationRetrieval: false,\n      hasContent: true,\n      fileSelected: false,\n      currentMedia: this.props.currentMedia || \"\",\n      seekTo: \"\",\n      measuresToAnnotationsMap: {},\n      annoToDisplay: [],\n      helpWindowIsActive: false,\n      replyAnnotationTargetId: \"\",\n      areRepliesVisible: false,\n\n      ftempoSearchCounter: 1,\n      applicationMode: ApplicationMode.Annotate,\n      vrvOptions: {\n        scale: defaultVerovioScale,\n        adjustPageHeight: 0,\n        pageHeight: defaultVerovioHeight,\n        pageWidth: defaultVerovioWidth,\n        footer: \"none\",\n        unit: 6,\n      },\n    };\n    this.handleSelectionChange = this.handleSelectionChange.bind(this);\n    this.handleScoreUpdate = this.handleScoreUpdate.bind(this);\n    this.handleStringChange = this.handleStringChange.bind(this);\n    this.onResponse = this.onResponse.bind(this);\n    this.onRefreshClick = this.onRefreshClick.bind(this);\n    this.onReceiveAnnotationContainerContent = this.onReceiveAnnotationContainerContent.bind(\n      this\n    );\n    this.onAnnoReplyHandler = this.onAnnoReplyHandler.bind(this);\n    this.convertCoords = this.convertCoords.bind(this);\n    this.onMediaClick = this.onMediaClick.bind(this);\n    this.handleAnnoShowingUpdate = this.handleAnnoShowingUpdate.bind(this);\n    this.player = React.createRef();\n    this.handlePageTurn = this.handlePageTurn.bind(this);\n  }\n\n  zoomIn = () => {\n    let step = 5;\n    let initialZoom = this.state.vrvOptions.scale;\n    let initialHeight = this.state.vrvOptions.pageHeight;\n    let initialWidth = this.state.vrvOptions.pageWidth;\n    //   vrvOptions.scale = vrvOptions.scale + step;\n    //   vrvOptions.pageHeight = (pageHeight * 100) / vrvOptions.scale;\n    //   vrvOptions.pageWidth = (pageWidth * 100) / vrvOptions.scale;\n    //\n    const newVrvOptions = Object.assign({}, this.state.vrvOptions);\n    newVrvOptions.scale = initialZoom + step;\n    //prettier-ignore\n    newVrvOptions.pageHeight = initialHeight - (newVrvOptions.scale * 5);\n    //prettier-ignore\n    newVrvOptions.pageWidth = initialWidth - (newVrvOptions.scale * 2);\n    if (newVrvOptions.scale < 50) {\n      //prettier-ignore\n      newVrvOptions.pageWidth = initialWidth - (newVrvOptions.scale * 5);\n    }\n\n    if (newVrvOptions.scale < 40) {\n      //prettier-ignore\n      newVrvOptions.pageHeight = initialHeight - (newVrvOptions.scale * 8);\n      //prettier-ignore\n      newVrvOptions.pageWidth = initialWidth - (newVrvOptions.scale * 5);\n    }\n    if (viewPortWidth >= 1925) {\n      if (newVrvOptions.pageWidth > 3500) {\n        newVrvOptions.pageWidth = 3500;\n      }\n    }\n\n    if (newVrvOptions.scale >= 80) {\n      console.log(\"max zoom reached\");\n      return;\n    }\n    // if (newVrvOptions.pageWidth >= 2380) {\n    //   newVrvOptions.pageWidth = 2380;\n    // }\n    // if (newVrvOptions.pageWidth < 1500 || newVrvOptions.pageWidth > 1500) {\n    //   newVrvOptions.pageWidth = 1500;\n    // }\n    // if (newVrvOptions.pageHeight < 1500 || newVrvOptions.pageHeight > 1500) {\n    //   newVrvOptions.pageHeight = 1500;\n    // }\n    console.log(\n      \"ZOOM INCREASE\",\n      newVrvOptions.scale,\n      \"page w\",\n      newVrvOptions.pageWidth,\n      \"page h\",\n      newVrvOptions.pageHeight\n    );\n    this.setState({ vrvOptions: newVrvOptions });\n  };\n\n  zoomOut = () => {\n    let step = 5;\n    let initialZoom = this.state.vrvOptions.scale;\n    let initialHeight = this.state.vrvOptions.pageHeight;\n    let initialWidth = this.state.vrvOptions.pageWidth;\n    //   vrvOptions.scale = vrvOptions.scale + step;\n    //   vrvOptions.pageHeight = (pageHeight * 100) / vrvOptions.scale;\n    //   vrvOptions.pageWidth = (pageWidth * 100) / vrvOptions.scale;\n    //\n    const newVrvOptions = Object.assign({}, this.state.vrvOptions);\n    newVrvOptions.scale = initialZoom - step;\n    //prettier-ignore\n    newVrvOptions.pageHeight = initialHeight + (newVrvOptions.scale * 5);\n    //prettier-ignore\n    newVrvOptions.pageWidth = initialWidth + (newVrvOptions.scale * 2);\n    if (newVrvOptions.scale < 50) {\n      //prettier-ignore\n      newVrvOptions.pageWidth = initialWidth + (newVrvOptions.scale * 5);\n    }\n\n    if (newVrvOptions.scale < 40) {\n      //prettier-ignore\n      newVrvOptions.pageHeight = initialHeight + (newVrvOptions.scale * 8);\n      //prettier-ignore\n      newVrvOptions.pageWidth = initialWidth + (newVrvOptions.scale * 5);\n    }\n\n    if (newVrvOptions.scale <= 25) {\n      console.log(\"minimum zoom reached\");\n      return;\n    }\n    // if (newVrvOptions.pageWidth < 1500 || newVrvOptions.pageWidth > 1500) {\n    //   newVrvOptions.pageWidth = 1500;\n    // }\n    // if (newVrvOptions.pageHeight < 1500 || newVrvOptions.pageHeight > 1500) {\n    //   newVrvOptions.pageHeight = 1500;\n    // }\n    console.log(\n      \"ZOOM DECREASE\",\n      newVrvOptions.scale,\n      \"page w\",\n      newVrvOptions.pageWidth,\n      \"page h\",\n      newVrvOptions.pageHeight\n    );\n    this.setState({ vrvOptions: newVrvOptions });\n  };\n\n  showReplyHandler = () => {\n    this.setState({ areRepliesVisible: !this.state.areRepliesVisible });\n  };\n  activateModal = () => {\n    this.setState({ helpWindowIsActive: true });\n  };\n\n  deactivateModal = () => {\n    this.setState({ helpWindowIsActive: false });\n  };\n\n  convertCoords(elem) {\n    if (\n      document.getElementById(elem.getAttribute(\"id\")) &&\n      elem.style.display !== \"none\" &&\n      (elem.getBBox().x !== 0 || elem.getBBox().y !== 0)\n    ) {\n      //trims the box to fit within the measure and avoids overflowing slurs etc\n      var staff1 = elem.getElementsByClassName(\"staff\")[0];\n      //magic from David Lewis\n      var staffLines = Array.prototype.filter.call(\n        staff1.children,\n        (x) => x.tagName === \"path\"\n      );\n      //sets the bounding box size to the stafflines size\n      var bbox = staffLines[0].getBBox();\n      const x = elem.getBBox().x;\n      const width = bbox.width;\n      const y = elem.getBBox().y;\n      const height = elem.getBBox().height;\n      const offset = elem.closest(\"svg\").parentElement.getBoundingClientRect();\n      const matrix = elem.getScreenCTM();\n      return {\n        x: matrix.a * x + matrix.c * y + matrix.e - offset.left,\n        y: matrix.b * x + matrix.d * y + matrix.f - offset.top,\n        x2: matrix.a * (x + width) + matrix.c * y + matrix.e - offset.left,\n        y2: matrix.b * x + matrix.d * (y + height) + matrix.f - offset.top,\n      };\n    } else {\n      console.warn(\"Element unavailable on page: \", elem.getAttribute(\"id\"));\n      return { x: 0, y: 0, x2: 0, y2: 0 };\n    }\n  }\n\n  onAnnoTypeChange = (e) =>\n    this.setState({\n      annotationType: e.target.value,\n      placeholder: e.target.placeholder,\n      buttonContent: \"Submit to your Solid POD\",\n    });\n\n  handleStringChange(selectorString) {\n    this.setState({ selectorString }, () =>\n      console.log(this.state.selectorString)\n    );\n  }\n\n  handleSelectionChange(selection) {\n    this.setState({ selection });\n    /* and anything else your app needs to do when the selection changes */\n  }\n\n  onFileSelected = (uri) => {\n    this.setState({ uri: uri, fileSelected: true });\n  };\n\n  //////////// NEEDS TO WIPE TARGET REPLY AFTER RPELYING TO IT ALSO THE ANNOTATION TYPE HANDLING IS MESSY //////////////////\n  onAnnoReplyHandler(replyTarget, replyTargetId) {\n    this.setState({\n      annotationType: \"replying\",\n      placeholder: \"you are replying to the selected annotation\",\n      buttonContent: \"Reply to selected Solid annotation\",\n      replyAnnotationTarget: replyTarget,\n      replyAnnotationTargetId: replyTargetId,\n    });\n  }\n\n  onResponse(resp) {\n    console.log(resp);\n    if (resp.status === 201) {\n      this.setState(\n        {\n          toggleAnnotationRetrieval: true,\n        },\n        () => {\n          let loading = document.querySelector(\".loading\");\n          loading.classList.remove(\"hidden\");\n          this.setState({\n            toggleAnnotationRetrieval: false,\n            annotationType: \"describing\",\n            replyAnnotationTarget: [],\n            replyAnnotationTargetId: \"\",\n            placeholder: \"Add your annotation...\",\n            annoToDisplay: [],\n          });\n        }\n      );\n    } else if (resp.status === 404) {\n      alert(\"folder not found, check your annotation container path!\");\n    }\n  }\n\n  onRefreshClick() {\n    if (this.state.hasContent === false) {\n      return;\n    } else\n      this.setState(\n        {\n          toggleAnnotationRetrieval: true,\n        },\n        () => {\n          let loading = document.querySelector(\".loading\");\n          loading.classList.remove(\"hidden\");\n          this.setState({\n            toggleAnnotationRetrieval: false,\n            annotationType: \"describing\",\n            replyAnnotationTarget: [],\n            replyAnnotationTargetId: \"\",\n            placeholder: \"Add your annotation...\",\n            annoToDisplay: [],\n          });\n        }\n      );\n  }\n\n  onMediaClick(bodyMedia) {\n    console.log(\"button click\", bodyMedia);\n    //appends http fragment to avoid partial linking error\n    //const mediaCue = bodies[0][\"id\"];\n    // TODO validate properly\n    const currentMedia = bodyMedia.split(\"#\")[0];\n    const seekTo = bodyMedia.split(\"#\")[1].replace(\"t=\", \"\");\n    console.log(\"Setting up seek to: \", currentMedia, seekTo);\n    this.setState({ currentMedia }, () => this.player.current.seekTo(seekTo));\n  }\n\n  onReceiveAnnotationContainerContent(content) {\n    if (!content || !content.length) {\n      alert(\"no annotation to retrieve\");\n      const noLongerInFocusList = Array.from(\n        document.getElementsByClassName(\"inFocus\")\n      );\n      noLongerInFocusList.forEach((noFocusElement) =>\n        noFocusElement.classList.remove(\"inFocus\")\n      );\n      document.querySelectorAll(\".measureBox\").forEach((mb) => mb.remove());\n      document\n        .querySelectorAll(\".measureBoxBackground\")\n        .forEach((mb) => mb.remove());\n      this.setState(\n        {\n          hasContent: false,\n        },\n        () => {\n          console.log(this.state.hasContent, \"no content to retrieve\");\n          this.setState({ hasContent: true });\n        }\n      );\n      return;\n    }\n    // FIXME: Validate that these are (TROMPA?) Web Annotations\n    content = content.filter((c) => c[\"@id\"].endsWith(\".jsonld\"));\n\n    let measuresToAnnotationsMapList = content.map((anno) => {\n      let distinctMeasures = [];\n      // replying annotations don't have distinct measures since they target\n      // annotations, *not* MEI elements\n      if (anno.motivation !== \"replying\") {\n        const measures = anno.target\n          .map((jsonTarget) => {\n            const targetId = jsonTarget.id;\n            const fragment = targetId.substr(targetId.lastIndexOf(\"#\"));\n            const element = document.querySelector(fragment);\n            let measure = \"\";\n            if (element) {\n              measure = element.closest(\".measure\");\n            }\n            return measure;\n          })\n          .filter((el) => el); // ensure element exists on screen\n        distinctMeasures = [...new Set(measures)];\n      }\n      return { annoId: anno[\"@id\"], measures: distinctMeasures };\n    });\n    let newMap = {};\n    measuresToAnnotationsMapList.forEach((measureToAnnoMap) => {\n      measureToAnnoMap.measures.forEach((m) => {\n        const mId = m.getAttribute(\"id\");\n        if (mId in newMap) {\n          newMap[mId].push(measureToAnnoMap.annoId);\n        } else {\n          newMap[mId] = [measureToAnnoMap.annoId];\n        }\n      });\n    });\n\n    this.setState(\n      { currentAnnotation: content, measuresToAnnotationsMap: newMap },\n      () => {\n        const noLongerInFocusList = Array.from(\n          document.getElementsByClassName(\"inFocus\")\n        );\n        noLongerInFocusList.forEach((noFocusElement) =>\n          noFocusElement.classList.remove(\"inFocus\")\n        );\n        // delete any existing measure boxes so we can redraw from blank slate\n        document.querySelectorAll(\".measureBox\").forEach((mb) => mb.remove());\n        document\n          .querySelectorAll(\".measureBoxBackground\")\n          .forEach((mb) => mb.remove());\n        console.log(\"Mapped annotaitons \", newMap);\n        console.log(\"current annotations \", content);\n        // draw bounding boxes for all measures containing annotations\n        const annotatedMeasuresOnScreen = Object.keys(\n          this.state.measuresToAnnotationsMap\n        ).filter(\n          (measureId) => document.querySelectorAll(\"#\" + measureId).length\n        );\n        console.log(\n          \"Annotated measures on screen: \",\n          annotatedMeasuresOnScreen\n        );\n        annotatedMeasuresOnScreen.forEach((measureId) => {\n          const coords = this.convertCoords(\n            document.querySelector(\"#\" + measureId)\n          );\n          console.log(\"Coords: \", coords);\n\n          const measureBox = document.createElement(\"div\");\n          const measureBoxBackground = document.createElement(\"div\");\n\n          const coordsBox = {\n            left: Math.floor(coords.x),\n            top: Math.floor(coords.y),\n            width: Math.ceil(coords.x2 - coords.x),\n            height: Math.ceil(coords.y2 - coords.y),\n          };\n          console.log(\"Coords box: \", coordsBox);\n          measureBox.setAttribute(\"id\", \"measureBox-\" + measureId);\n          measureBox.setAttribute(\"class\", \"measureBox\");\n          measureBox.setAttribute(\n            \"style\",\n            \"position: absolute;\" +\n              \"background: rgba(0, 0, 0, 0);\" +\n              \"left: \" +\n              coordsBox.left +\n              \"px;\" +\n              \"top: \" +\n              coordsBox.top +\n              \"px;\" +\n              \"width: \" +\n              coordsBox.width +\n              \"px;\" +\n              \"height: \" +\n              coordsBox.height +\n              \"px;\" +\n              \"z-index: 1\"\n          );\n\n          measureBoxBackground.setAttribute(\n            \"id\",\n            \"measureBoxBackground-\" + measureId\n          );\n          measureBoxBackground.setAttribute(\"class\", \"measureBoxBackground\");\n          measureBoxBackground.classList.remove(\"isOpen\");\n          measureBoxBackground.classList.add(\"isClosed\");\n          measureBoxBackground.setAttribute(\n            \"style\",\n            \"position: absolute;\" +\n              // \"background: rgba(241, 145, 0, 0.25);\" +\n              // \"border:1px solid orange;\" +\n              \"left: \" +\n              coordsBox.left +\n              \"px;\" +\n              \"top: \" +\n              coordsBox.top +\n              \"px;\" +\n              \"width: \" +\n              coordsBox.width +\n              \"px;\" +\n              \"height: \" +\n              coordsBox.height +\n              \"px;\" +\n              \"z-index: -1\"\n          );\n          console.log(\"TRYING TO DRAW\", measureBox);\n          document\n            .querySelector(\".annotationBoxesContainer\")\n            .appendChild(measureBox);\n          document\n            .querySelector(\".annotationBoxesContainer\")\n            .appendChild(measureBoxBackground);\n\n          // FIXME: might need to work more on the onClick interaction\n          // e.preventDefault();\n          // const isBoxOpen = Array.from(e.currentTarget.classList).filter((c) =>\n          //   c.startsWith(\"measureBox\")\n          // );\n          // if (isBoxOpen.length > 1) {\n          //   console.warn(\"too many open boxes\", e.target);\n          // }\n          // // remove focus off previous inFocus elements (now outdated)\n          // const noLongerOpen = Array.from(\n          //   document.getElementsByClassName(\"isOpen\")\n          // );\n          // noLongerOpen.forEach((noFocusElement) =>\n          //   noFocusElement.classList.remove(\"isOpen\")\n          // );\n          // // add focus to newly inFocus elements\n          // const inOpenList = Array.from(\n          //   document.getElementsByClassName(isBoxOpen[0])\n          // );\n          // inOpenList.forEach((focusElement) =>\n          //   focusElement.classList.add(\"isOpen\")\n          // );\n\n          measureBox.onclick = (e) => {\n            const noLongerInFocusList = Array.from(\n              document.getElementsByClassName(\"inFocus\")\n            );\n            noLongerInFocusList.forEach((noFocusElement) =>\n              noFocusElement.classList.remove(\"inFocus\")\n            );\n            const bgBoxes = document.querySelectorAll(\".measureBoxBackground\");\n            const frontBox = e.target.closest(\".measureBox\");\n            bgBoxes.forEach((box) => {\n              box.classList.add(\"isClosed\");\n              box.classList.remove(\"isOpen\");\n              const bgBoxId = box.id.split(\"measureBoxBackground-\")[1];\n              const frontBoxId = frontBox.id.split(\"measureBox-\")[1];\n\n              if (frontBoxId === bgBoxId) {\n                box.classList.remove(\"isClosed\");\n                box.classList.add(\"isOpen\");\n                // box.setAttribute(\n                //   \"style\",\n                //   \"position: absolute;\" +\n                //     \"background: rgb(255, 255, 255);\" +\n                //     \"border:1px solid orange;\" +\n                //     \"left: \" +\n                //     coordsBox.left +\n                //     \"px;\" +\n                //     \"top: \" +\n                //     coordsBox.top +\n                //     \"px;\" +\n                //     \"width: \" +\n                //     coordsBox.width +\n                //     \"px;\" +\n                //     \"height: \" +\n                //     coordsBox.height +\n                //     \"px;\" +\n                //     \"z-index: -1\"\n                // );\n              }\n            });\n\n            const noLongerShowing = Array.from(\n              document.getElementsByClassName(\"showReply\")\n            );\n            console.log(\"no longer showing \", noLongerShowing);\n            //hides them\n\n            if (noLongerShowing.length) {\n              //const replyHolder = document.createElement(\"div\");\n              if (this.state.areRepliesVisible === true) {\n                this.setState({ areRepliesVisible: false });\n              }\n              const annoContainer = document.querySelector(\".listContainer\");\n              console.log(annoContainer);\n              //annoContainer.appendChild(replyHolder);\n              noLongerShowing.forEach((noReplyShowing) => {\n                noReplyShowing.classList.add(\"hiddenReply\");\n                annoContainer.appendChild(noReplyShowing);\n              });\n              noLongerShowing.forEach((noReplyShowing) =>\n                noReplyShowing.classList.remove(\"showReply\")\n              );\n            }\n            this.handleAnnoShowingUpdate(content, measureId);\n          };\n        });\n      }\n    );\n\n    console.log(\"iteration succeded\");\n\n    content.forEach((anno) => {\n      if (anno.motivation !== \"replying\") {\n        anno.target.forEach((jsonTarget) => {\n          const bodies = anno.body;\n          const targetId = jsonTarget.id;\n          const fragment = targetId.substr(targetId.lastIndexOf(\"#\"));\n          const element = document.querySelector(fragment);\n          if (!element) {\n            return console.warn(\"no content has been found\");\n          }\n          const annoId = anno[\"@id\"];\n          const annoIdFragment = annoId.substr(annoId.lastIndexOf(\"/\") + 1);\n          //checks what's the motivation of the target\n          switch (anno.motivation) {\n            case \"describing\":\n              if (bodies.length) {\n                if (\"value\" in bodies[0]) {\n                  // const title = document.createElementNS(\n                  //   \"http://www.w3.org/2000/svg\",\n                  //   \"title\"\n                  // );\n                  // Embeds the annotation text into this title node\n                  //title.innerHTML = bodies[0][\"value\"];\n                  //element.insertBefore(title, element.firstChild);\n                  //element.classList.add(anno.anno.motivation);\n                  element.classList.add(\"focus-\" + annoIdFragment);\n                }\n              }\n              break;\n            case \"linking\":\n              if (bodies.length) {\n                // make the target clickable, linking to the (first) body URI\n                // element.addEventListener(\n                //   \"click\",\n                //   function () {\n                //     //appends http fragment to avoid partial linking error\n                //     const URL = bodies[0][\"id\"];\n                //     if (URL.startsWith(\"http\")) {\n                //       window.open(URL, \"_blank\");\n                //     } else {\n                //       const appendURL = \"https://\" + URL;\n                //       window.open(appendURL, \"_blank\");\n                //     }\n                //   },\n                //   true\n                // );\n                // and turn the cursor into a pointer as a hint that it's clickable\n                element.classList.add(\"focus-\" + annoIdFragment);\n                //element.classList.add(anno.anno.motivation);\n                element.classList.add(\"focus-\" + annoIdFragment);\n              }\n              break;\n            case \"trompa:cueMedia\":\n              if (bodies.length) {\n                // make the target clickable, seeking player to the (first) body media cue\n                // element.onMediaClick = () => {\n                //   //appends http fragment to avoid partial linking error\n                //   const mediaCue = bodies[0][\"id\"];\n                //   // TODO validate properly\n                //   const currentMedia = mediaCue.split(\"#\")[0];\n                //   const seekTo = mediaCue.split(\"#\")[1].replace(\"t=\", \"\");\n                //   console.log(\"Setting up seek to: \", currentMedia, seekTo);\n                //   this.setState({ currentMedia }, () =>\n                //     this.player.current.seekTo(seekTo)\n                //   );\n                // };\n                // and turn the cursor into a pointer as a hint that it's clickable\n                element.classList.add(\"focus-\" + annoIdFragment);\n                //element.classList.add(\"cueMedia\");\n              }\n              break;\n            case \"trompa:cueImage\":\n              if (bodies.length) {\n                element.classList.add(\"focus-\" + annoIdFragment);\n                //element.classList.add(\"cueMedia\");\n              }\n              break;\n            case \"trompa:playlist\": {\n              return;\n            }\n\n            default:\n              console.log(\n                \"sorry, don't know what to do for this annotation boss\"\n              );\n          }\n        });\n      }\n    });\n    let loading = document.querySelector(\".loading\");\n    loading.classList.add(\"hidden\");\n  }\n\n  handleAnnoShowingUpdate(content, measureId) {\n    let _annoIds = content.map((jsonIds) => {\n      return jsonIds[\"@id\"];\n    });\n    let _filteredAnnoIds = this.state.measuresToAnnotationsMap[measureId];\n    let compare = _annoIds.filter((anno) => _filteredAnnoIds.includes(anno));\n    // compare has all annotation IDs *for our measure*\n    // we want those, PLUS all replying annotations (which aren't tied to measures)\n    const annotationsToDisplay = [\n      ...compare,\n      ...content\n        .filter((anno) => anno.motivation === \"replying\") // get the replies\n        .map((anno) => anno[\"@id\"]), // and return their IDs\n    ];\n    console.log(\"to display: \", annotationsToDisplay);\n    this.setState({\n      annoToDisplay: annotationsToDisplay,\n    });\n  }\n\n  handleScoreUpdate(scoreElement) {\n    console.log(\"Received updated score DOM element: \", scoreElement);\n    this.onRefreshClick();\n  }\n\n  handlePageTurn() {\n    document.querySelectorAll(\".measureBox\").forEach((mb) => mb.remove());\n    document\n      .querySelectorAll(\".measureBoxBackground\")\n      .forEach((mb) => mb.remove());\n  }\n\n  onFtempoSearchButton = () => {\n    // TODO: This is a quick hack. At the moment SelectableScore doesn't trigger\n    //  handleScoreUpdate on initial page load, only after a page is turned or zoomed\n    //  So in order to make sure that we pass this.props.score.vrvTk to <FtempoSearch>,\n    //  we just randomly update state when the user presses a button to make sure that\n    //  we re-render\n    console.debug(`state update ${this.state.ftempoSearchCounter}`);\n    this.setState({\n      ftempoSearchCounter: this.state.ftempoSearchCounter + 1,\n      applicationMode: ApplicationMode.Search,\n    });\n  };\n\n  render() {\n    return (\n      <div>\n        {!this.state.fileSelected && (\n          <FileSelector\n            onSelect={this.onFileSelected}\n            defaultUrl={this.state.uri}\n            placeholder=\"mahler four hands rendition...\"\n          />\n        )}\n        {this.state.fileSelected && (\n          <div>\n            <div className=\"scoreContainer\">\n              <div className=\"annotationBoxesContainer\" />\n              <SelectableScore\n                uri={this.state.uri}\n                annotationContainerUri={this.props.submitUri}\n                vrvOptions={this.state.vrvOptions}\n                onSelectionChange={this.handleSelectionChange}\n                selectorString={this.state.selectorString}\n                onScoreUpdate={this.handleScoreUpdate}\n                onReceiveAnnotationContainerContent={\n                  this.onReceiveAnnotationContainerContent\n                }\n                toggleAnnotationRetrieval={this.state.toggleAnnotationRetrieval}\n                selectionArea=\".scoreContainer\"\n              />\n            </div>\n            <div className=\"controls\">\n              <div className=\"prevPageButton\" onClick={this.handlePageTurn}>\n                <PrevPageButton\n                  buttonContent={<img src={ArrowToLeft} alt=\"previous page\" />}\n                  uri={this.state.uri}\n                />\n              </div>\n              <button onClick={this.zoomOut} className=\"zoomOut\">\n                <img src={SearchMinus} alt=\"zoom out\" />\n              </button>\n              {/* pass anything as buttonContent that you'd like to function as a clickable next page button */}\n              <button onClick={this.zoomIn} className=\"zoomIn\">\n                <img src={SearchPlus} alt=\"zoom in\" />\n              </button>\n              <div className=\"nextPageButton\" onClick={this.handlePageTurn}>\n                <NextPageButton\n                  buttonContent={<img src={ArrowToRight} alt=\"next page\" />}\n                  uri={this.state.uri}\n                />\n              </div>\n            </div>\n          </div>\n        )}\n\n        {this.state.fileSelected && (\n          <FtempoSearch\n            onButtonPress={this.onFtempoSearchButton}\n            vrvToolkit={this.props.score.vrvTk}\n            counter={this.state.ftempoSearchCounter}\n          />\n        )}\n\n        {/*selector for the component selection*/}\n        {this.state.applicationMode === ApplicationMode.Annotate && (\n          <div>\n            <SelectionHandler\n              selectorString={this.state.selectorString}\n              handleStringChange={this.handleStringChange}\n            />\n            {/*annotation submission component*/}\n            <AnnotationSubmitter\n              onAnnoTypeChange={this.onAnnoTypeChange}\n              uri={this.state.uri}\n              submitUri={this.props.submitUri}\n              selection={this.state.selection}\n              onResponse={this.onResponse}\n              onRefreshClick={this.onRefreshClick}\n              annotationType={this.state.annotationType}\n              placeholder={this.state.placeholder}\n              replyAnnotationTarget={this.state.replyAnnotationTarget}\n              buttonContent={this.state.buttonContent}\n              creator={this.props.userId}\n              selectorString={this.state.selectorString}\n              replyAnnotationTargetId={this.state.replyAnnotationTargetId}\n              replyAnnoBody={this.state.replyAnnoBody}\n            />\n\n            <RenditionsPlaylist\n              allEntries={this.state.currentAnnotation}\n              onRefreshClick={this.onRefreshClick}\n            />\n\n            <AnnotationList\n              allEntries={this.state.currentAnnotation}\n              filteringEntries={this.state.annoToDisplay}\n              onAnnoReplyHandler={this.onAnnoReplyHandler}\n              onMediaClick={this.onMediaClick}\n              replyAnnotationTarget={this.state.replyAnnotationTarget}\n              showReplyHandler={this.showReplyHandler}\n              areRepliesVisible={this.state.areRepliesVisible}\n              onRefreshClick={this.onRefreshClick}\n            />\n            <div className=\"loading hidden\">\n              Loading...\n              <svg\n                viewBox=\"0 0 100 100\"\n                xmlns=\"http://www.w3.org/2000/svg\"\n                className=\"loader\"\n                height=\"100%\"\n                width=\"100%\"\n              >\n                <circle cx=\"50\" cy=\"50\" r=\"45\" />\n              </svg>\n            </div>\n            <ReactPlayer\n              width=\"80%\"\n              height=\"80%\"\n              ref={this.player}\n              url={this.state.currentMedia}\n              controls={true}\n              onReady={() => {\n                if (this.state.seekTo) {\n                  console.log(\"Seeking to: \", this.state.seekTo);\n                  this.player.current.seekTo(Math.floor(this.state.seekTo));\n                  this.setState({ seekTo: \"\" });\n                }\n              }}\n            />\n          </div>\n        )}\n\n        <div>\n          <button\n            onClick={this.activateModal}\n            style={{ padding: \"5px\", marginTop: \"5px\", marginLeft: \"5px\" }}\n          >\n            help\n          </button>\n          <HelpModal\n            isOpen={this.state.helpWindowIsActive}\n            onRequestClose={this.deactivateModal}\n          />\n        </div>\n      </div>\n    );\n  }\n}\n\nfunction mapStateToProps({ score }) {\n  return { score };\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return bindActionCreators({}, dispatch);\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps, false, {\n  forwardRef: true,\n})(SelectableScoreApp);\n","import React, { useState } from \"react\";\nimport data from \"@solid/query-ldflex\";\n\nimport {\n  LoginButton,\n  LogoutButton,\n  Value,\n  LoggedIn,\n  LoggedOut,\n  useLDflexValue,\n} from \"@solid/react\";\n\nimport SelectableScoreApp from \"./selectableScoreApp\";\nimport Logo from \"../graphics/top-bar-logo_0_0.png\";\n\nexport default function SolidWrapper(props) {\n  data.context.extend({\n    trompa: \"http://vocab.trompamusic.eu/vocab#\",\n  });\n  const userPOD = useLDflexValue(\"user.storage\");\n  const userId = useLDflexValue(\"user\");\n  const [userInput, setUserInput] = useState(\"private/\");\n  const handleUserInput = (e) => {\n    // eslint-disable-next-line\n    const containerPath = e.target.value\n      ? setUserInput(e.target.value)\n      : \"private/\";\n  };\n  return (\n    <div id=\"authWrapper\">\n      <LoggedOut>\n        <div>\n          <a\n            href=\"https://trompamusic.eu/\"\n            target=\"_blank\"\n            rel=\"noopener noreferrer\"\n          >\n            <img src={Logo} alt=\"trompa logo\" />\n          </a>\n          <p>\n            <LoginButton className=\"loginButton\" popup=\"auth-popup.html\">\n              Log in with Solid\n            </LoginButton>\n          </p>\n        </div>\n      </LoggedOut>\n      <LoggedIn>\n        <a\n          href=\"https://trompamusic.eu/\"\n          target=\"_blank\"\n          rel=\"noopener noreferrer\"\n        >\n          <img src={Logo} alt=\"trompa logo\" />\n        </a>\n        <h2>Music scholars annotation tool</h2>\n        <p>\n          You are logged in as{\" \"}\n          <a href={userId} target=\"_blank\" rel=\"noopener noreferrer\">\n            <Value src=\"user.name\" />\n          </a>\n        </p>\n        <p title=\"close the current session and quit the app\">\n          <LogoutButton className=\"logoutButton\">Log out</LogoutButton>\n        </p>\n        <p>Specify the annotation container path inside your Pod:</p>\n        <div>\n          <input\n            title=\"enter your preferred POD folder\"\n            type=\"text\"\n            placeholder=\"private/\"\n            onChange={handleUserInput}\n            className=\"sizedTextBox\"\n          />\n        </div>\n        {typeof userPOD !== \"undefined\" ? (\n          <SelectableScoreApp\n            uri={props.uri}\n            //vrvOptions={props.vrvOptions}\n            podUri={`${userPOD}`}\n            submitUri={`${userPOD}` + userInput}\n            userId={`${userId}`}\n          />\n        ) : (\n          <div>Loading... </div>\n        )}\n      </LoggedIn>\n    </div>\n  );\n}\n","import React, { Component } from \"react\";\nimport { Provider } from \"react-redux\";\nimport { createStore, applyMiddleware } from \"redux\";\nimport thunk from \"redux-thunk\";\nimport ReduxPromise from \"redux-promise\";\n\nimport { reducers } from \"meld-clients-core/lib/reducers\";\nimport SolidWrapper from \"./solidWrapper\";\n\nconst createStoreWithMiddleware = applyMiddleware(\n  thunk,\n  ReduxPromise\n)(createStore);\n\nexport default class SelectableScoreWrapper extends Component {\n  constructor(props) {\n    super(props);\n    // MEI_URI: Can be a full URI, e.g. obtained from the TROMPA Contributor Environment\n    this.state = {\n      MEI_URI: \"Mahler.mei\",\n    };\n    this.store = createStore(reducers);\n  }\n\n  render() {\n    return (\n      <Provider store={createStoreWithMiddleware(reducers)}>\n        <SolidWrapper\n          uri={this.state.MEI_URI}\n          //vrvOptions={this.props.vrvOptions}\n          handleMEIInput={this.handleMEIInput}\n          onChange={this.onChange}\n          value={this.state.value}\n          // zoomIn={this.props.zoomIn}\n          // zoomOut={this.props.zoomOut}\n        />\n      </Provider>\n    );\n  }\n}\n","import React, {Component} from \"react\";\nimport SelectableScoreWrapper from \"./containers/selectableScoreWrapper\";\nimport {ApolloClient, ApolloProvider, InMemoryCache} from \"@apollo/client\";\n\nimport { reducers } from 'meld-clients-core/lib/reducers';\nimport {createStore, applyMiddleware} from \"redux\";\nimport thunk from \"redux-thunk\";\nimport {Provider} from \"react-redux\";\nimport ReduxPromise from 'redux-promise';\n\n\nconst CE_URL = \"https://api.trompamusic.eu\"\n\nconst client = new ApolloClient({\n    uri: CE_URL,\n    cache: new InMemoryCache()\n});\n\nexport default class App extends Component {\n    render() {\n        const createStoreWithMiddleware = applyMiddleware(thunk, ReduxPromise)(createStore);\n\n        return (\n            <Provider store={createStoreWithMiddleware(reducers)}>\n            <ApolloProvider client={client}>\n                <SelectableScoreWrapper/>\n            </ApolloProvider>\n            </Provider>\n        )\n    }\n}","import React from \"react\";\nimport ReactDOM from \"react-dom\";\n\nimport App from \"./App\";\n\n// Parameters for SelectableScore component\n// ****************************************\n// MEI_URI: Can be a full URI, e.g. obtained from the TROMPA Contributor Environment\n// const MEI_URI = \"test.mei\";\n// vrvOptions: If not supplied to <SelectableScore>, will default to predefined options\n// var zoom = 45;\n// var pageHeight = 1150;\n// var pageWidth = 1000;\n// var sizedPageWidth = (pageWidth * 100) / zoom;\n// var sizedPageHeight = (pageHeight * 100) / zoom;\n// const vrvOptions = {\n//   scale: zoom,\n//   adjustPageHeight: 1,\n//   pageHeight: sizedPageHeight,\n//   pageWidth: sizedPageWidth,\n//   footer: \"none\",\n//   unit: 6,\n// };\n\n// function onZoomIncrease() {\n//   var step = 10;\n//   vrvOptions.scale = vrvOptions.scale + step;\n//   vrvOptions.pageHeight = (pageHeight * 100) / vrvOptions.scale;\n//   vrvOptions.pageWidth = (pageWidth * 100) / vrvOptions.scale;\n//   console.log(\n//     \"ZOOM INCREASE\",\n//     vrvOptions.scale,\n//     \"page w\",\n//     vrvOptions.pageWidth,\n//     \"page h\",\n//     vrvOptions.pageHeight\n//   );\n// }\n\n// function onZoomDecrease() {\n//   var step = 10;\n//   vrvOptions.scale = vrvOptions.scale - step;\n//   vrvOptions.pageHeight = (pageHeight * 100) / vrvOptions.scale;\n//   vrvOptions.pageWidth = (pageWidth * 100) / vrvOptions.scale;\n//   console.log(\n//     \"ZOOM DECREASE\",\n//     vrvOptions.scale,\n//     \"page w\",\n//     vrvOptions.pageWidth,\n//     \"page h\",\n//     vrvOptions.pageHeight\n//   );\n// }\n\nReactDOM.render(\n  <App/>,\n  document.querySelector(\".container\")\n);\n"],"sourceRoot":""}